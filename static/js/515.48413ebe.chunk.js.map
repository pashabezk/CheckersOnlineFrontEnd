{"version":3,"file":"static/js/515.48413ebe.chunk.js","mappings":"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","sources":["webpack://checkers-online-frontend/./src/Components/LoadingPage/LoadingPage.module.css?f1d5","Components/LoadingPage/LoadingPage.jsx","Components/HOC/withAuthRedirect.jsx","webpack://checkers-online-frontend/./src/Components/ProfilePage/ProfilePage.module.css?9e02","Components/ProfilePage/GamesBlock/ModalCreateGame.jsx","Components/ProfilePage/GamesBlock/ModalConnectToGame.jsx","Components/ProfilePage/GamesBlock/GamesBlock.jsx","Components/ProfilePage/ProfilePage.jsx","Components/ProfilePage/ProfilePageContainer.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"loadingContainer\":\"LoadingPage_loadingContainer__karst\",\"loader\":\"LoadingPage_loader__Z4Isg\"};","import React from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {getInfoFromTokenAsync, selectToken, selectUserId} from \"../../Redux/AuthReducer\";\r\nimport {Spin} from \"antd\";\r\nimport styles from \"./LoadingPage.module.css\"\r\n\r\n// страница загрузки во время ожидания получения данных о пользователе по токену\r\nconst LoadingPage = () => {\r\n\r\n\tconst userId = useSelector(selectUserId);\r\n\tconst token = useSelector(selectToken);\r\n\tconst dispatch = useDispatch();\r\n\r\n\t// если токен есть (получен из куки), а идентификатора пользователя нет, значит надо подгрузить информацию о пользователе\r\n\tif (token && !userId) {\r\n\t\tdispatch(getInfoFromTokenAsync(token));\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={styles.loadingContainer}>\r\n\t\t\t<Spin tip=\"Загрузка\" size=\"large\" className={styles.loader}/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default LoadingPage;","import React from \"react\";\r\nimport {Navigate, useLocation} from \"react-router-dom\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {selectToken, selectUserId, tryLogOutAsync} from \"../../Redux/AuthReducer\";\r\nimport LoadingPage from \"../LoadingPage/LoadingPage\";\r\nimport {getTokenFromCookie} from \"../../Cookie/AuthWithCookie\";\r\n\r\n\r\n// пропускает на нужную страницу только если пользователь авторизован\r\n// иначе редиректит на страницу авторизации\r\nconst withAuthRedirect = (Component) => {\r\n\treturn (props) => {\r\n\t\tconst userId = useSelector(selectUserId);\r\n\t\tconst token = useSelector(selectToken);\r\n\t\tconst dispatch = useDispatch();\r\n\t\tconst location = useLocation().pathname.split('/')[1]; // берём адрес url\r\n\r\n\t\t// проверка, что токен не был отозван\r\n\t\tif(getTokenFromCookie() !== token) {\r\n\t\t\tdispatch(tryLogOutAsync()); // если отозван, то на всякий случай диспатчим logout\r\n\t\t\treturn <Navigate to={\"/login\"}/> // редирект на страницу авторизации\r\n\t\t}\r\n\r\n\t\t// если токен есть, а идентификатора пользователя нет, значит надо попробовать получить информацию о пользователе по токену (это происходит внутри отрендеренного компонента)\r\n\t\tif (token && !userId) {\r\n\t\t\treturn <LoadingPage/>\r\n\t\t}\r\n\r\n\t\t// чтобы избежать зацикленности при попадании на страницу логина необходимо дополнительное условие\r\n\t\t// если пользователь хочет попасть на страничку авторизации и ещё не авторизован, то пропускаем его\r\n\t\t// если он уже авторизован, то редиректим на главную страницу\r\n\t\tif (location === \"login\") {\r\n\t\t\tif (userId)\r\n\t\t\t\treturn <Navigate to={\"/\"}/>\r\n\t\t\telse\r\n\t\t\t\treturn <Component {...props}/>\r\n\t\t}\r\n\r\n\t\t// если авторизация пройдена, то рендерится нужный компонент, иначе редирект на страницу авторизации\r\n\t\tif (userId)\r\n\t\t\treturn <Component {...props}/>\r\n\t\treturn <Navigate to={\"/login\"}/>\r\n\t}\r\n}\r\n\r\nexport default withAuthRedirect;","// extracted by mini-css-extract-plugin\nexport default {\"userPhotoAndLoginBlock\":\"ProfilePage_userPhotoAndLoginBlock__1JfNh\",\"nameBlock\":\"ProfilePage_nameBlock__pHmDX\",\"copy\":\"ProfilePage_copy__PNjWm\",\"gameCardBlock\":\"ProfilePage_gameCardBlock__jzv5s\",\"gamesBlockHeader\":\"ProfilePage_gamesBlockHeader__Z2CI4\",\"gameCard\":\"ProfilePage_gameCard__xuvKm\",\"win\":\"ProfilePage_win__ywIdB\",\"lose\":\"ProfilePage_lose__VoJT8\",\"waiting\":\"ProfilePage_waiting__6+o21\",\"ready\":\"ProfilePage_ready__jbGYu\",\"user\":\"ProfilePage_user__-XiU2\",\"gameId\":\"ProfilePage_gameId__-KLAl\"};","import React from \"react\";\r\nimport {Button, Modal, Tooltip, Typography} from \"antd\";\r\nimport styles from \"../ProfilePage.module.css\";\r\nimport {CopyOutlined} from \"@ant-design/icons\";\r\n\r\nconst {Text} = Typography;\r\n\r\n// Модульное окно с уведомлением о создании новой игры\r\nconst ModalCreateGame = ({messageApi,  createdGameId, onCreateNewGameModalClose, isCreateGameModalOpen}) => {\r\n\r\n\t// функция для создания всплывающего окна\r\n\tconst success = () => {\r\n\t\tmessageApi.open({\r\n\t\t\ttype: \"success\",\r\n\t\t\tcontent: \"Скопировано\",\r\n\t\t\tduration: 2\r\n\t\t});\r\n\t};\r\n\r\n\tconst onClickCopy = () => { // функция копирования по нажатию\r\n\t\tnavigator.clipboard.writeText(String(createdGameId))\r\n\t\t\t.then(() => success()); // отображение всплывающего окна\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle=\"Игра создана\"\r\n\t\t\topen={isCreateGameModalOpen}\r\n\t\t\tclosable={false}\r\n\t\t\tfooter={[\r\n\t\t\t\t<Button type=\"primary\" onClick={onCreateNewGameModalClose}>OK</Button>\r\n\t\t\t]}\r\n\t\t>\r\n\t\t\t<div>\r\n\t\t\t\t<Text>Для начала игры ваш соперник должен нажать кнопку «Присоединиться» и ввести идентификатор игры:</Text><br/>\r\n\t\t\t\t<Text>id: </Text>\r\n\t\t\t\t<Tooltip title=\"Копировать\">\r\n\t\t\t\t\t<Text code onClick={onClickCopy} className={styles.copy}>{createdGameId}&nbsp;<CopyOutlined/></Text>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default ModalCreateGame;","import React from \"react\";\r\nimport {Button, Form, InputNumber, Modal, Typography} from \"antd\";\r\nimport {Navigate} from \"react-router-dom\";\r\n\r\nconst {Text} = Typography;\r\n\r\n// Модульное окно для подключения к уже существующей игре\r\nconst ModalConnectToGame = ({isConnectGameModalOpen, isConnectGameLoading, connectedGameId, connectGameError, setConnectToGameModalOpened, onConnectToGameModalFormSubmit}) => {\r\n\r\n\tconst [formConnectToGame] = Form.useForm(); // для работы с формой в модульном окне подключения к игре\r\n\r\n\tif (connectedGameId) { // если появился идентификатор подключения к игре, значит удалось подсоединиться к игре, значит нужно перейти к игре\r\n\t\tsetConnectToGameModalOpened(false); // закрытие модульного окна\r\n\t\treturn <Navigate to={\"/game\"}/>; // переход на страницу игры\r\n\t\t// TODO изменить путь к игре\r\n\t}\r\n\r\n\t// функция обработчик нажатия кнопки \"Отмена\" в модульном окне подключения к игре\r\n\tconst onConnectGameModalCancelButtonClick = () => {\r\n\t\tformConnectToGame.resetFields(); // очистка формы\r\n\t\tsetConnectToGameModalOpened(false); // закрытие модульного окна\r\n\t};\r\n\r\n\t// функция обработчик отправки формы в модульном окне подключения к игре\r\n\t// функция вызывается только если форма прошла валидацию\r\n\tconst onConnectToGameFormSubmitted = () => {\r\n\t\tonConnectToGameModalFormSubmit(formConnectToGame.getFieldValue(\"gameId\"));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle=\"Присоединиться к игре\"\r\n\t\t\topen={isConnectGameModalOpen}\r\n\t\t\tfooter={[\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype=\"default\"\r\n\t\t\t\t\tonClick={onConnectGameModalCancelButtonClick}\r\n\t\t\t\t\tkey=\"cancel\">Отмена\r\n\t\t\t\t</Button>,\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tonClick={() => formConnectToGame.submit()}\r\n\t\t\t\t\tloading={isConnectGameLoading}\r\n\t\t\t\t\tkey=\"ok\">OK\r\n\t\t\t\t</Button>\r\n\t\t\t]}\r\n\t\t>\r\n\t\t\t<div>\r\n\t\t\t\t<Text>Для подключения к игре введите её идентификатор</Text><br/>\r\n\t\t\t\t<Form\r\n\t\t\t\t\tonFinish={onConnectToGameFormSubmitted}\r\n\t\t\t\t\tform={formConnectToGame}\r\n\t\t\t\t\trequiredMark={false}>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"id\"\r\n\t\t\t\t\t\tname=\"gameId\"\r\n\t\t\t\t\t\tvalidateStatus={connectGameError ? \"error\" : \"success\"}\r\n\t\t\t\t\t\thelp={connectGameError}\r\n\t\t\t\t\t\trules={[{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: \"Введите идентификатор игры\",\r\n\t\t\t\t\t\t}]}>\r\n\t\t\t\t\t\t<InputNumber size=\"small\" min={1}/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nexport default ModalConnectToGame;","import {GAME_STATUS_BLACK_TURN, GAME_STATUS_BLACK_WIN, GAME_STATUS_WAITING_FOR_OPPONENT, GAME_STATUS_WHITE_TURN, GAME_STATUS_WHITE_WIN} from \"../../../Redux/ProfileReducer\";\r\nimport {ClockCircleOutlined, MehOutlined, PlusSquareOutlined, RightSquareOutlined, TrophyOutlined, UsergroupAddOutlined} from \"@ant-design/icons\";\r\nimport styles from \"../ProfilePage.module.css\";\r\nimport {CHECKER_COLOR_BLACK, CHECKER_COLOR_WHITE} from \"../../../Redux/GameReducer\";\r\nimport {Button, Card, message, Spin, Tooltip} from \"antd\";\r\nimport Title from \"antd/lib/typography/Title\";\r\nimport React from \"react\";\r\nimport ModalCreateGame from \"./ModalCreateGame\";\r\nimport ModalConnectToGame from \"./ModalConnectToGame\";\r\n\r\n// карточка с игрой\r\n// game = {\r\n// \tid: 1,\r\n// \topponentId: 32,\r\n// \topponentLogin: \"UserLogin\",\r\n// \tplayerColor: \"BLACK\",\r\n// \tstatus: GAME_STATUS_WHITE_TURN\r\n// }\r\nconst GameNode = ({game}) => {\r\n\tlet gameStatus = game.status; // статус игры\r\n\tlet icon; // иконка\r\n\tlet background; // стиль фона для карточки\r\n\tif (gameStatus === GAME_STATUS_WAITING_FOR_OPPONENT) {\r\n\t\tgameStatus = \"Ожидаем соперника\";\r\n\t\ticon = <ClockCircleOutlined/>;\r\n\t\tbackground = styles.waiting;\r\n\t} else {\r\n\t\tif ((gameStatus === GAME_STATUS_WHITE_WIN && game.playerColor === CHECKER_COLOR_WHITE) ||\r\n\t\t\t(gameStatus === GAME_STATUS_BLACK_WIN && game.playerColor === CHECKER_COLOR_BLACK)) {\r\n\t\t\tgameStatus = \"Вы победили\";\r\n\t\t\ticon = <TrophyOutlined/>;\r\n\t\t\tbackground = styles.win;\r\n\t\t} else {\r\n\t\t\tif (gameStatus === GAME_STATUS_WHITE_WIN || gameStatus === GAME_STATUS_BLACK_WIN) {\r\n\t\t\t\tgameStatus = \"Вы проиграли\";\r\n\t\t\t\ticon = <MehOutlined/>;\r\n\t\t\t\tbackground = styles.lose;\r\n\t\t\t} else {\r\n\t\t\t\tif ((gameStatus === GAME_STATUS_WHITE_TURN && game.playerColor === CHECKER_COLOR_WHITE) ||\r\n\t\t\t\t\t(gameStatus === GAME_STATUS_BLACK_TURN && game.playerColor === CHECKER_COLOR_BLACK)) {\r\n\t\t\t\t\tgameStatus = \"Ваш ход\";\r\n\t\t\t\t\ticon = <RightSquareOutlined/>;\r\n\t\t\t\t\tbackground = styles.ready;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgameStatus = \"Ход соперника\";\r\n\t\t\t\t\ticon = <ClockCircleOutlined/>;\r\n\t\t\t\t\tbackground = styles.waiting;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Card className={styles.gameCard + \" \" + background}>\r\n\t\t\t{icon}&nbsp;&nbsp;\r\n\t\t\t{\r\n\t\t\t\tgame.opponentId &&\r\n\t\t\t\t<Tooltip title={\"id: \" + game.opponentId}>\r\n\t\t\t\t\t<span className={styles.user}>{game.opponentLogin}</span>&nbsp;\r\n\t\t\t\t</Tooltip>\r\n\t\t\t}\r\n\t\t\t<span>{gameStatus}</span>&nbsp;\r\n\t\t\t<span className={styles.gameId}>(id: {game.id})</span>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nconst GamesBlock = ({games, isGamesListLoading, isCreateGameLoading, onCreateNewGameButtonClick, setConnectToGameModalOpened, createGameModalProps, connectToGameModalProps}) => {\r\n\r\n\tconst [messageApi, contextHolder] = message.useMessage(); // для отображения всплывающего сообщения\r\n\r\n\tlet gamesArr = [];\r\n\tif (!isGamesListLoading && games && games !== []) {\r\n\t\tgamesArr = games.map(game => <GameNode key={game.id} game={game}/>);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{contextHolder}\r\n\t\t\t<div className={styles.gamesBlockHeader}>\r\n\t\t\t\t<Title level={2}>Список партий</Title>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tloading={isCreateGameLoading}\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\ticon={<PlusSquareOutlined/>}\r\n\t\t\t\t\t\tonClick={onCreateNewGameButtonClick}>Создать\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\ticon={<UsergroupAddOutlined/>}\r\n\t\t\t\t\t\tonClick={() => setConnectToGameModalOpened(true)}>Присоединиться\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{\r\n\t\t\t\tisGamesListLoading\r\n\t\t\t\t\t? <Spin tip=\"Подгружаем данные\"/>\r\n\t\t\t\t\t: <div className={styles.gameCardBlock}>{gamesArr}</div>\r\n\t\t\t}\r\n\t\t\t<ModalCreateGame messageApi={messageApi} {...createGameModalProps}/>\r\n\t\t\t<ModalConnectToGame {...connectToGameModalProps}/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default GamesBlock;","import React from \"react\";\r\nimport PageWithDefaultMenuSidebar from \"../PageWithSideMenu/PageWithStandartMenu\";\r\nimport {Avatar} from \"antd\";\r\nimport {UserOutlined} from \"@ant-design/icons\";\r\nimport styles from \"./ProfilePage.module.css\"\r\nimport Title from \"antd/lib/typography/Title\";\r\nimport GamesBlock from \"./GamesBlock/GamesBlock\";\r\n\r\nconst UserPhotoAndLoginBlock = ({login}) => {\r\n\treturn (\r\n\t\t<div className={styles.userPhotoAndLoginBlock}>\r\n\t\t\t<Avatar\r\n\t\t\t\tsize={100}\r\n\t\t\t\ticon={<UserOutlined/>}\r\n\t\t\t/>\r\n\t\t\t<div className={styles.nameBlock}>\r\n\t\t\t\t<Title level={2}>{login}</Title>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst ProfilePage = ({login, gamesBlockProps}) => {\r\n\treturn (\r\n\t\t<PageWithDefaultMenuSidebar>\r\n\t\t\t<UserPhotoAndLoginBlock login={login}/>\r\n\t\t\t<GamesBlock {...gamesBlockProps}/>\r\n\t\t</PageWithDefaultMenuSidebar>\r\n\t);\r\n}\r\n\r\nexport default ProfilePage;","import React from \"react\";\r\nimport withAuthRedirect from \"../HOC/withAuthRedirect\";\r\nimport ProfilePage from \"./ProfilePage\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {\r\n\tselectConnectedGameId,\r\n\tselectConnectGameError,\r\n\tselectCreatedGameId,\r\n\tselectGames,\r\n\tselectIsConnectGameLoading,\r\n\tselectIsConnectGameModalOpen,\r\n\tselectIsCreateGameLoading,\r\n\tselectIsCreateGameModalOpen,\r\n\tselectIsGamesListLoading,\r\n\tsetIsConnectGameModalOpen,\r\n\tsetIsCreateGameModalOpen,\r\n\ttryConnectToGameAsync,\r\n\ttryCreateNewGameAsync,\r\n\ttryGetGamesListAsync\r\n} from \"../../Redux/ProfileReducer\";\r\nimport {selectLogin} from \"../../Redux/AuthReducer\";\r\n\r\nconst ProfilePageContainer = () => {\r\n\r\n\tconst login = useSelector(selectLogin);\r\n\tconst games = useSelector(selectGames);\r\n\tconst isGamesListLoading = useSelector(selectIsGamesListLoading);\r\n\tconst isCreateGameLoading = useSelector(selectIsCreateGameLoading);\r\n\tconst createdGameId = useSelector(selectCreatedGameId);\r\n\tconst isCreateGameModalOpen = useSelector(selectIsCreateGameModalOpen);\r\n\tconst isConnectGameModalOpen = useSelector(selectIsConnectGameModalOpen);\r\n\tconst isConnectGameLoading = useSelector(selectIsConnectGameLoading);\r\n\tconst connectedGameId = useSelector(selectConnectedGameId);\r\n\tconst connectGameError = useSelector(selectConnectGameError);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tif (games === null) {\r\n\t\tdispatch(tryGetGamesListAsync());\r\n\t}\r\n\r\n\t// нажатие по кнопке \"Создать\" для создания новой игры\r\n\tconst onCreateNewGameButtonClick = () => {\r\n\t\tdispatch(tryCreateNewGameAsync());\r\n\t};\r\n\r\n\t// нажатие на ок для закрытия модульного окна с сообщением о созданной игре\r\n\tconst onCreateNewGameModalClose = () => {\r\n\t\tdispatch(setIsCreateGameModalOpen(false));\r\n\t\tdispatch(tryGetGamesListAsync());\r\n\t};\r\n\r\n\t// установка значения открытия модульного окна \"Присоединиться к игре\"\r\n\tconst setConnectToGameModalOpened = (open) => {\r\n\t\tdispatch(setIsConnectGameModalOpen(open));\r\n\t};\r\n\r\n\tconst onConnectToGameModalFormSubmit = (gameId) => {\r\n\t\tdispatch(tryConnectToGameAsync(gameId));\r\n\t}\r\n\r\n\t// упаковка props для более удобной передачи между компонентами\r\n\tconst gamesBlockProps = {\r\n\t\tgames,\r\n\t\tisGamesListLoading,\r\n\t\tisCreateGameLoading,\r\n\t\tonCreateNewGameButtonClick,\r\n\t\tsetConnectToGameModalOpened,\r\n\t\tcreateGameModalProps: {\r\n\t\t\tcreatedGameId,\r\n\t\t\tonCreateNewGameModalClose,\r\n\t\t\tisCreateGameModalOpen\r\n\t\t},\r\n\t\tconnectToGameModalProps: {\r\n\t\t\tisConnectGameModalOpen,\r\n\t\t\tisConnectGameLoading,\r\n\t\t\tconnectedGameId,\r\n\t\t\tconnectGameError,\r\n\t\t\tsetConnectToGameModalOpened,\r\n\t\t\tonConnectToGameModalFormSubmit\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ProfilePage login={login} gamesBlockProps={gamesBlockProps}/>\r\n\t);\r\n}\r\n\r\nexport default withAuthRedirect(ProfilePageContainer);"],"names":["userId","useSelector","selectUserId","token","selectToken","dispatch","useDispatch","getInfoFromTokenAsync","className","styles","tip","size","Component","props","location","useLocation","pathname","split","getTokenFromCookie","tryLogOutAsync","to","Text","Typography","messageApi","createdGameId","onCreateNewGameModalClose","isCreateGameModalOpen","title","open","closable","footer","type","onClick","code","navigator","clipboard","writeText","String","then","content","duration","CopyOutlined","isConnectGameModalOpen","isConnectGameLoading","connectedGameId","connectGameError","setConnectToGameModalOpened","onConnectToGameModalFormSubmit","Form","formConnectToGame","resetFields","submit","loading","onFinish","getFieldValue","form","requiredMark","label","name","validateStatus","help","rules","required","message","min","GameNode","icon","background","game","gameStatus","status","GAME_STATUS_WAITING_FOR_OPPONENT","ClockCircleOutlined","GAME_STATUS_WHITE_WIN","playerColor","CHECKER_COLOR_WHITE","GAME_STATUS_BLACK_WIN","CHECKER_COLOR_BLACK","TrophyOutlined","MehOutlined","GAME_STATUS_WHITE_TURN","GAME_STATUS_BLACK_TURN","RightSquareOutlined","opponentId","opponentLogin","id","games","isGamesListLoading","isCreateGameLoading","onCreateNewGameButtonClick","createGameModalProps","connectToGameModalProps","contextHolder","gamesArr","map","Title","level","PlusSquareOutlined","UsergroupAddOutlined","UserPhotoAndLoginBlock","login","UserOutlined","gamesBlockProps","withAuthRedirect","selectLogin","selectGames","selectIsGamesListLoading","selectIsCreateGameLoading","selectCreatedGameId","selectIsCreateGameModalOpen","selectIsConnectGameModalOpen","selectIsConnectGameLoading","selectConnectedGameId","selectConnectGameError","tryGetGamesListAsync","setIsConnectGameModalOpen","tryCreateNewGameAsync","setIsCreateGameModalOpen","gameId","tryConnectToGameAsync"],"sourceRoot":""}