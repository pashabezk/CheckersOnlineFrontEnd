{"version":3,"file":"static/js/376.7a9ae7a1.chunk.js","mappings":"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","sources":["webpack://checkers-online-frontend/./src/Components/GamePage/CheckersField/CheckersField.module.css?04a0","Assets/Img/Chekers/BlackQueen.svg","Assets/Img/Chekers/WhiteQueen.svg","Assets/Img/Chekers/Black.svg","Components/GamePage/CheckersField/CheckersField.jsx","webpack://checkers-online-frontend/./src/Components/GamePage/GamePage.module.css?c0cd","Components/GamePage/GamePage.jsx","../node_modules/@ant-design/icons-svg/es/asn/TrophyTwoTone.js","../node_modules/@ant-design/icons/es/icons/TrophyTwoTone.js","Components/GamePage/PlayedGamePage.jsx","Components/GamePage/GamePageContainer.jsx","Components/HOC/withAuthRedirect.jsx","../node_modules/@ant-design/icons-svg/es/asn/FrownOutlined.js","../node_modules/@ant-design/icons/es/icons/FrownOutlined.js","Components/PageNotFound/PageNotFound.jsx","webpack://checkers-online-frontend/./src/Components/TemplatePageWithMenu/TemplatePageWithMenu.module.css?1b26","Components/TemplatePageWithMenu/TemplatePageWithMenu.jsx","../node_modules/react-use-websocket/src/index.ts","../node_modules/react-use-websocket/src/lib/attach-listener.ts","../node_modules/react-use-websocket/src/lib/attach-shared-listeners.ts","../node_modules/react-use-websocket/src/lib/constants.ts","../node_modules/react-use-websocket/src/lib/create-or-join.ts","../node_modules/react-use-websocket/src/lib/get-url.ts","../node_modules/react-use-websocket/src/lib/globals.ts","../node_modules/react-use-websocket/src/lib/manage-subscribers.ts","../node_modules/react-use-websocket/src/lib/proxy.ts","../node_modules/react-use-websocket/src/lib/socket-io.ts","../node_modules/react-use-websocket/src/lib/use-event-source.ts","../node_modules/react-use-websocket/src/lib/use-socket-io.ts","../node_modules/react-use-websocket/src/lib/use-websocket.ts","../node_modules/react-use-websocket/src/lib/util.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"checkersField\":\"CheckersField_checkersField__5I996\",\"letters\":\"CheckersField_letters__hW59M\",\"lettersTop\":\"CheckersField_lettersTop__22LOg\",\"lettersBottom\":\"CheckersField_lettersBottom__van6G\",\"numbers\":\"CheckersField_numbers__ZoKYg\",\"numbersLeft\":\"CheckersField_numbersLeft__hW187\",\"numbersRight\":\"CheckersField_numbersRight__5RHpU\",\"cellsField\":\"CheckersField_cellsField__t6if+\",\"checkersFieldRow\":\"CheckersField_checkersFieldRow__a97xq\",\"blackCell\":\"CheckersField_blackCell__YDxPZ\",\"whiteCell\":\"CheckersField_whiteCell__jRUyy\",\"availableCell\":\"CheckersField_availableCell__wIu4D\",\"checker\":\"CheckersField_checker__0jVkb\",\"checkerPlayer\":\"CheckersField_checkerPlayer__kZHN6\",\"checkerSelected\":\"CheckersField_checkerSelected__+6GkT\"};","var _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgBlackQueen(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100mm\",\n    height: \"100mm\",\n    viewBox: \"0 0 100 100\",\n    id: \"svg5\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"layer1\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    style: {\n      fill: \"#373737\",\n      stroke: \"#000000\",\n      strokeWidth: 1.45,\n      fillOpacity: 1,\n      strokeDasharray: \"none\"\n    },\n    id: \"path3080\",\n    cx: 50.129402,\n    cy: 49.972546,\n    r: 48.280346\n  }), /*#__PURE__*/React.createElement(\"ellipse\", {\n    style: {\n      fill: \"#373737\",\n      fillOpacity: 1,\n      stroke: \"#000000\",\n      strokeWidth: 1.16018,\n      strokeDasharray: \"none\"\n    },\n    id: \"path3080-0\",\n    cx: 50.29356,\n    cy: 50.193779,\n    rx: 36.310677,\n    ry: 36.833721\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#acaa6d\",\n      fillOpacity: 1,\n      stroke: \"#000000\",\n      strokeWidth: 1.45\n    },\n    d: \"m 29.125482,45.191656 c 1.32771,3.700537 4.331597,11.232016 5.855324,15.041292 1.523727,3.809275 1.567251,3.896326 6.225594,3.852634 4.658343,-0.04369 13.931023,-0.217826 18.536515,-0.172646 4.605492,0.04518 4.543932,0.309452 5.796004,-3.547979 1.252073,-3.857432 3.817178,-11.834662 4.894646,-15.742864 1.077467,-3.908202 0.666737,-3.745917 -1.738909,-2.914555 -2.405646,0.831362 -6.805936,2.3317 -9.006282,3.103837 -2.200346,0.772137 -2.200346,0.815667 -3.397488,-1.448149 -1.197141,-2.263816 -3.591493,-6.834852 -4.788775,-9.076904 -1.197283,-2.242052 -1.197283,-2.154989 -2.481604,0.130531 -1.28432,2.285521 -3.852808,6.76949 -5.081709,9.021614 -1.228901,2.252125 -1.118522,2.272344 -3.469432,1.619328 -2.350909,-0.653016 -7.162929,-1.979246 -9.743126,-2.70766 -2.580198,-0.728415 -2.928468,-0.859016 -1.600758,2.841521 z\",\n    id: \"path12350\"\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBlackQueen);\nexport default __webpack_public_path__ + \"static/media/BlackQueen.04b418a082c57e040b7f1b2928e42c8e.svg\";\nexport { ForwardRef as ReactComponent };","var _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgWhiteQueen(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100mm\",\n    height: \"100mm\",\n    viewBox: \"0 0 100 100\",\n    id: \"svg5\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"layer1\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    style: {\n      fill: \"#e4e4e4\",\n      stroke: \"#000000\",\n      strokeWidth: 1.45,\n      fillOpacity: 1,\n      strokeDasharray: \"none\"\n    },\n    id: \"path3080\",\n    cx: 50.129402,\n    cy: 49.972546,\n    r: 48.280346\n  }), /*#__PURE__*/React.createElement(\"ellipse\", {\n    style: {\n      fill: \"#e4e4e4\",\n      fillOpacity: 1,\n      stroke: \"#000000\",\n      strokeWidth: 1.16018,\n      strokeDasharray: \"none\"\n    },\n    id: \"path3080-0\",\n    cx: 50.29356,\n    cy: 50.193779,\n    rx: 36.310677,\n    ry: 36.833721\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#acaa6d\",\n      fillOpacity: 0.65357137,\n      stroke: \"#000000\",\n      strokeWidth: 1.45\n    },\n    d: \"m 29.125482,45.191656 c 1.32771,3.700537 4.331597,11.232016 5.855324,15.041292 1.523727,3.809275 1.567251,3.896326 6.225594,3.852634 4.658343,-0.04369 13.931023,-0.217826 18.536515,-0.172646 4.605492,0.04518 4.543932,0.309452 5.796004,-3.547979 1.252073,-3.857432 3.817178,-11.834662 4.894646,-15.742864 1.077467,-3.908202 0.666737,-3.745917 -1.738909,-2.914555 -2.405646,0.831362 -6.805936,2.3317 -9.006282,3.103837 -2.200346,0.772137 -2.200346,0.815667 -3.397488,-1.448149 -1.197141,-2.263816 -3.591493,-6.834852 -4.788775,-9.076904 -1.197283,-2.242052 -1.197283,-2.154989 -2.481604,0.130531 -1.28432,2.285521 -3.852808,6.76949 -5.081709,9.021614 -1.228901,2.252125 -1.118522,2.272344 -3.469432,1.619328 -2.350909,-0.653016 -7.162929,-1.979246 -9.743126,-2.70766 -2.580198,-0.728415 -2.928468,-0.859016 -1.600758,2.841521 z\",\n    id: \"path12350\"\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgWhiteQueen);\nexport default __webpack_public_path__ + \"static/media/WhiteQueen.1a036d2a0d3d912d39226611496470dc.svg\";\nexport { ForwardRef as ReactComponent };","var _defs;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgBlack(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"100mm\",\n    height: \"100mm\",\n    viewBox: \"0 0 100 100\",\n    id: \"svg5\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", {\n    id: \"defs2\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"layer1\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    style: {\n      fill: \"#373737\",\n      stroke: \"#000000\",\n      strokeWidth: 1.45,\n      fillOpacity: 1,\n      strokeDasharray: \"none\"\n    },\n    id: \"path3080\",\n    cx: 50.129402,\n    cy: 49.972546,\n    r: 48.280346\n  }), /*#__PURE__*/React.createElement(\"ellipse\", {\n    style: {\n      fill: \"#373737\",\n      fillOpacity: 1,\n      stroke: \"#000000\",\n      strokeWidth: 1.16018,\n      strokeDasharray: \"none\"\n    },\n    id: \"path3080-0\",\n    cx: 50.29356,\n    cy: 50.193779,\n    rx: 36.310677,\n    ry: 36.833721\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBlack);\nexport default __webpack_public_path__ + \"static/media/Black.89cd2513aff4bafc1851b83f8b43dc26.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\r\nimport styles from \"./CheckersField.module.css\"\r\nimport blackQueen from \"../../../Assets/Img/Chekers/BlackQueen.svg\";\r\nimport whiteQueen from \"../../../Assets/Img/Chekers/WhiteQueen.svg\";\r\nimport blackChecker from \"../../../Assets/Img/Chekers/Black.svg\";\r\nimport whiteChecker from \"../../../Assets/Img/Chekers/White.svg\";\r\nimport {CHECKER_COLOR_BLACK, CHECKER_COLOR_SHORTLY_BLACK, CHECKER_TYPE_SHORTLY_CHECKER, convertFullParamsToShortly, GAME_STATUS_YOUR_TURN} from \"../../../Strings\";\r\nimport {letters} from \"../GamePageContainer\";\r\nimport LoaderFullSpace from \"../../Common/LoaderFullSpace/LoaderFullSpace\";\r\nimport Title from \"antd/lib/typography/Title\";\r\n\r\nconst Checker = ({type, color, selected, onSelectChecker, position, playerColor, gameStatus}) => {\r\n\tconst checkerOnClick = () => {\r\n\t\tonSelectChecker(position);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<img\r\n\t\t\tclassName={styles.checker + (selected ? (\" \" + styles.checkerSelected) : (convertFullParamsToShortly(playerColor) === color ? (\" \" + styles.checkerPlayer) : \"\"))}\r\n\t\t\tsrc={\r\n\t\t\t\tcolor === CHECKER_COLOR_SHORTLY_BLACK\r\n\t\t\t\t\t? (type === CHECKER_TYPE_SHORTLY_CHECKER ? blackChecker : blackQueen)\r\n\t\t\t\t\t: (type === CHECKER_TYPE_SHORTLY_CHECKER ? whiteChecker : whiteQueen)\r\n\t\t\t}\r\n\t\t\talt=\"checker\"\r\n\t\t\t// нажатие по шашке должно происходить только в случае если это собственная шашка и если сейчас ходит игрок\r\n\t\t\tonClick={(convertFullParamsToShortly(playerColor) === color && gameStatus === GAME_STATUS_YOUR_TURN) ? checkerOnClick : undefined}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nconst Cell = ({isBlack, checker, selected, onSelectChecker, position, playerColor, isAvailable, gameStatus, createCheckerStep}) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={(isBlack ? styles.blackCell : styles.whiteCell) + (isAvailable ? (\" \" + styles.availableCell) : \"\")}\r\n\t\t\tonClick={isAvailable ? () => {\r\n\t\t\t\tcreateCheckerStep(position)\r\n\t\t\t} : undefined} // если клетка доступна для хода, то надо навесить на неё обработчик нажатий\r\n\t\t>\r\n\t\t\t{\r\n\t\t\t\tchecker\r\n\t\t\t\t\t? <Checker type={checker.type} color={checker.color} selected={selected} onSelectChecker={onSelectChecker} position={position} playerColor={playerColor} gameStatus={gameStatus}/>\r\n\t\t\t\t\t: <div></div>\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Row = ({rowNumber, gameField, selectedCheckerPosition, onSelectChecker, playerColor, availableFields, gameStatus, createCheckerStep}) => {\r\n\tlet isBlack = rowNumber % 2 !== 1; // вычисление цвета первой клетки ряда\r\n\tconst cells = letters.map(letter => {\r\n\t\tisBlack = !isBlack;\r\n\t\tconst position = letter + rowNumber; // позиция в шашечной нотации, например: a1 или g5\r\n\t\tlet selected = false; // является ли шашка на позиции выбранной\r\n\t\tconst checker = gameField.find(elem => { // поиск: есть ли шашка на этой позиции\r\n\t\t\tif (elem.position === position) {\r\n\t\t\t\tif (position === selectedCheckerPosition)\r\n\t\t\t\t\tselected = true;\r\n\t\t\t\treturn elem;\r\n\t\t\t} else return false;\r\n\t\t});\r\n\r\n\t\t// является ли отрисовываемая клетка доступной к ходу\r\n\t\tconst isAvailable = availableFields.find(elem => {\r\n\t\t\treturn elem === position;\r\n\t\t});\r\n\r\n\t\treturn <Cell\r\n\t\t\tkey={position}\r\n\t\t\tisBlack={isBlack}\r\n\t\t\tchecker={checker}\r\n\t\t\tselected={selected}\r\n\t\t\tonSelectChecker={onSelectChecker}\r\n\t\t\tposition={position}\r\n\t\t\tplayerColor={playerColor}\r\n\t\t\tisAvailable={isAvailable}\r\n\t\t\tgameStatus={gameStatus}\r\n\t\t\tcreateCheckerStep={createCheckerStep}\r\n\t\t/>\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div className={styles.checkersFieldRow}>\r\n\t\t\t{cells}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst CheckersField = ({gameStatus, gameField, isGameFieldLoading, gameFieldError, playerColor, selectedCheckerPosition, onSelectChecker, availableFields, createCheckerStep}) => {\r\n\r\n\tif (isGameFieldLoading)\r\n\t\treturn <LoaderFullSpace message=\"Загрузка шашек\"/>\r\n\r\n\tif (gameFieldError) {\r\n\t\treturn <div>\r\n\t\t\t<Title>Возникла ошибка</Title>\r\n\t\t\t<p>{gameFieldError}</p>\r\n\t\t</div>\r\n\t}\r\n\r\n\tlet numbers = [8, 7, 6, 5, 4, 3, 2, 1]; // ряд чисел для составления доски\r\n\r\n\tif (playerColor === CHECKER_COLOR_BLACK) // если игрок играет за черные шашки, то поле надо перевернуть\r\n\t\tnumbers = numbers.reverse()\r\n\r\n\tlet rows = [];\r\n\tif (Array.isArray(gameField)) {\r\n\t\trows = numbers.map(number => // формирование строк в которые будут помещены клетки с игрой\r\n\t\t\t<Row key={number}\r\n\t\t\t\t rowNumber={number}\r\n\t\t\t\t gameField={gameField}\r\n\t\t\t\t selectedCheckerPosition={selectedCheckerPosition}\r\n\t\t\t\t onSelectChecker={onSelectChecker}\r\n\t\t\t\t playerColor={playerColor}\r\n\t\t\t\t availableFields={availableFields}\r\n\t\t\t\t gameStatus={gameStatus}\r\n\t\t\t\t createCheckerStep={createCheckerStep}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tconst numbersSide = numbers.map(number => { // формирование блоков для нумерации доски\r\n\t\treturn <div key={number + \" \" + number}>{number}</div>\r\n\t});\r\n\r\n\tconst lettersSide = letters.map(letter => { // формирование блоков для нумерации доски с помощью букв\r\n\t\treturn <div key={letter + letter}>{letter}</div>\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div className={styles.checkersField}>\r\n\t\t\t<div className={styles.lettersTop + \" \" + styles.letters}>{lettersSide}</div>\r\n\t\t\t<div className={styles.numbersLeft + \" \" + styles.numbers}>{numbersSide}</div>\r\n\t\t\t<div className={styles.cellsField}>\r\n\t\t\t\t{rows}\r\n\t\t\t</div>\r\n\t\t\t<div className={styles.numbersRight + \" \" + styles.numbers}>{numbersSide}</div>\r\n\t\t\t<div className={styles.lettersBottom + \" \" + styles.letters}>{lettersSide}</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default CheckersField;","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"GamePage_user__C4Fzx\",\"checkerImg\":\"GamePage_checkerImg__h5uZj\",\"gameBlock\":\"GamePage_gameBlock__FJkLb\",\"checkersField\":\"GamePage_checkersField__StnyP\",\"gameBlockFooterWrapper\":\"GamePage_gameBlockFooterWrapper__fgZte\",\"gameBlockFooter\":\"GamePage_gameBlockFooter__0-Trc\"};","import React from \"react\";\r\nimport CheckersField from \"./CheckersField/CheckersField\";\r\nimport TemplatePageWithMenu from \"../TemplatePageWithMenu/TemplatePageWithMenu\";\r\nimport {Button} from \"antd\";\r\nimport Title from \"antd/lib/typography/Title\";\r\nimport blackChecker from \"../../Assets/Img/Chekers/Black.svg\";\r\nimport whiteChecker from \"../../Assets/Img/Chekers/White.svg\";\r\nimport styles from \"./GamePage.module.css\"\r\nimport LoaderFullSpace from \"../Common/LoaderFullSpace/LoaderFullSpace\";\r\nimport {CHECKER_COLOR_WHITE, GAME_STATUS_OPPONENT_TURN, GAME_STATUS_YOUR_TURN} from \"../../Strings\";\r\n\r\nconst GamePage = ({gameId, login, gameData, isGameDataLoading, gameDataError, onCapitulation, isCapitulating, checkersFieldProps}) => {\r\n\r\n\tconst body = <>\r\n\t\t<Title level={2}>\r\n\t\t\t<span>Партия с {gameData.opponentLogin}</span>\r\n\t\t</Title>\r\n\t\t<div>\r\n\t\t\t<p className={styles.user}>\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={gameData.playerColor === CHECKER_COLOR_WHITE ? whiteChecker : blackChecker}\r\n\t\t\t\t\talt=\"checker\"\r\n\t\t\t\t\tclassName={styles.checkerImg}/>\r\n\t\t\t\t<span>{login}</span>\r\n\t\t\t\t{gameData.status === GAME_STATUS_YOUR_TURN && <span> (Ваш ход)</span>}\r\n\t\t\t</p>\r\n\t\t\t<p className={styles.user}>\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={gameData.playerColor === CHECKER_COLOR_WHITE ? blackChecker : whiteChecker}\r\n\t\t\t\t\talt=\"checker\"\r\n\t\t\t\t\tclassName={styles.checkerImg}/>\r\n\t\t\t\t<span>{gameData.opponentLogin}</span>\r\n\t\t\t\t{gameData.status === GAME_STATUS_OPPONENT_TURN && <span> (его ход)</span>}\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t\t<div className={styles.gameBlock}>\r\n\t\t\t<div className={styles.checkersField}>\r\n\t\t\t\t<CheckersField {...checkersFieldProps}/>\r\n\t\t\t</div>\r\n\t\t\t<div className={styles.gameBlockFooterWrapper}>\r\n\t\t\t\t<div className={styles.gameBlockFooter}>\r\n\t\t\t\t\t<p>gameId: {gameId}</p>\r\n\t\t\t\t\t<Button danger loading={isCapitulating} onClick={() => onCapitulation()}>Сдаться</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</>;\r\n\r\n\tconst errorMsg = <>\r\n\t\t<Title>Возникла ошибка</Title>\r\n\t\t<p>{gameDataError}</p>\r\n\t</>;\r\n\r\n\treturn (\r\n\t\t<TemplatePageWithMenu>\r\n\t\t\t{\r\n\t\t\t\tisGameDataLoading\r\n\t\t\t\t\t? <LoaderFullSpace/>\r\n\t\t\t\t\t: gameDataError\r\n\t\t\t\t\t\t? errorMsg\r\n\t\t\t\t\t\t: body\r\n\t\t\t}\r\n\t\t</TemplatePageWithMenu>\r\n\t);\r\n}\r\n\r\nexport default GamePage;","// This icon file is generated automatically.\nvar TrophyTwoTone = { \"icon\": function render(primaryColor, secondaryColor) { return { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M320 480c0 49.1 19.1 95.3 53.9 130.1 34.7 34.8 81 53.9 130.1 53.9h16c49.1 0 95.3-19.1 130.1-53.9 34.8-34.7 53.9-81 53.9-130.1V184H320v296zM184 352c0 41 26.9 75.8 64 87.6-37.1-11.9-64-46.7-64-87.6zm364 382.5C665 721.8 758.4 630.2 773.8 514 758.3 630.2 665 721.7 548 734.5zM250.2 514C265.6 630.2 359 721.8 476 734.5 359 721.7 265.7 630.2 250.2 514z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM248 439.6a91.99 91.99 0 01-64-87.6V232h64v207.6zM704 480c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z\", \"fill\": primaryColor } }] }; }, \"name\": \"trophy\", \"theme\": \"twotone\" };\nexport default TrophyTwoTone;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport TrophyTwoToneSvg from \"@ant-design/icons-svg/es/asn/TrophyTwoTone\";\nimport AntdIcon from '../components/AntdIcon';\nvar TrophyTwoTone = function TrophyTwoTone(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: TrophyTwoToneSvg\n  }));\n};\nTrophyTwoTone.displayName = 'TrophyTwoTone';\nexport default /*#__PURE__*/React.forwardRef(TrophyTwoTone);","import React from \"react\";\r\nimport TemplatePageWithMenu from \"../TemplatePageWithMenu/TemplatePageWithMenu\";\r\nimport Title from \"antd/lib/typography/Title\";\r\nimport {TrophyTwoTone} from \"@ant-design/icons\";\r\n\r\nconst PlayedGamePage = ({winnerLogin, loserLogin}) => {\r\n\treturn (\r\n\t\t<TemplatePageWithMenu>\r\n\t\t\t<Title>Игра завершена</Title>\r\n\t\t\t<Title level={2}>Победитель: {winnerLogin} <TrophyTwoTone twoToneColor=\"#e09a00\"/></Title>\r\n\t\t\t<Title level={3}>Соперник: {loserLogin}</Title>\r\n\t\t</TemplatePageWithMenu>\r\n\t);\r\n};\r\n\r\nexport default PlayedGamePage;","import React, {useEffect} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {\r\n\tselectAvailableFields,\r\n\tselectGameData,\r\n\tselectGameDataError,\r\n\tselectGameField,\r\n\tselectGameFieldError,\r\n\tselectGameId,\r\n\tselectIsCapitulating,\r\n\tselectIsGameDataLoading,\r\n\tselectIsGameFieldLoading,\r\n\tselectSelectedCheckerPosition,\r\n\tsetGameId,\r\n\tsetSelectedCheckerPosition,\r\n\ttryCapitulateAsync,\r\n\ttryCreateCheckerStepAsync,\r\n\ttryGetAvailableFieldsForCheckerAsync,\r\n\ttryGetCheckersFieldAsync,\r\n\ttryGetGameDataAsync\r\n} from \"../../Redux/GameReducer\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport PageNotFound from \"../PageNotFound/PageNotFound\";\r\nimport withAuthRedirect from \"../HOC/withAuthRedirect\";\r\nimport GamePage from \"./GamePage\";\r\nimport {GAME_STATUS_FINISHED, GAME_STATUS_OPPONENT_WIN, GAME_STATUS_YOU_WIN} from \"../../Strings\";\r\nimport PlayedGamePage from \"./PlayedGamePage\";\r\nimport {selectLogin, selectUserId} from \"../../Redux/AuthReducer\";\r\nimport LoaderFullSpace from \"../Common/LoaderFullSpace/LoaderFullSpace\";\r\nimport {setGamesList} from \"../../Redux/ProfileReducer\";\r\nimport useWebSocket from \"react-use-websocket\";\r\nimport {SERVER_WEB_SOCKET_BASE_URL} from \"../../API/Config\";\r\n\r\nexport const letters = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\r\n\r\nconst GamePageContainer = () => {\r\n\r\n\tconst params = useParams(); // использование параметров строки запроса\r\n\tconst gameIdParam = params.gameId; // идентификатор игры\r\n\r\n\tconst login = useSelector(selectLogin);\r\n\tconst userId = useSelector(selectUserId);\r\n\tconst gameId = useSelector(selectGameId);\r\n\tconst gameData = useSelector(selectGameData);\r\n\tconst isGameDataLoading = useSelector(selectIsGameDataLoading);\r\n\tconst gameDataError = useSelector(selectGameDataError);\r\n\tconst gameField = useSelector(selectGameField);\r\n\tconst isGameFieldLoading = useSelector(selectIsGameFieldLoading);\r\n\tconst gameFieldError = useSelector(selectGameFieldError);\r\n\tconst selectedCheckerPosition = useSelector(selectSelectedCheckerPosition);\r\n\tconst availableFields = useSelector(selectAvailableFields);\r\n\tconst isCapitulating = useSelector(selectIsCapitulating);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\t// если идентификатор игры из пути не совпадает с тем что в редаксе, то надо его сохранить и получить данные об игровом поле, т.к. это означает, что пользователь только зашёл на страничку\r\n\t\tif (gameIdParam !== gameId) {\r\n\t\t\tdispatch(setGameId(gameIdParam));\r\n\t\t\tdispatch(tryGetGameDataAsync({gameId: gameIdParam, userId}));\r\n\t\t}\r\n\t\t// если игровые данные отсутствуют, то надо их подгрузить\r\n\t\tif (!gameData && !isGameDataLoading) {\r\n\t\t\tdispatch(tryGetGameDataAsync({gameId: gameIdParam, userId}));\r\n\t\t}\r\n\t\t// если игровые данные загружены, а данных по полю нет, то их надо подгрузить\r\n\t\tif (!gameField && !isGameFieldLoading && !isGameDataLoading) {\r\n\t\t\tdispatch(tryGetCheckersFieldAsync({gameId: gameIdParam, userId}));\r\n\t\t}\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => { // обработчик unmount компоненты\r\n\t\t\tdispatch(setGameId(null));\r\n\t\t}\r\n\t}, []);\r\n\r\n\t// создание подключения по WebSocket для получения данных о ходе соперника\r\n\tconst WS_PATH = SERVER_WEB_SOCKET_BASE_URL + `${userId}`;\r\n\tconst {lastJsonMessage} = useWebSocket(WS_PATH, {});\r\n\tuseEffect(() => {\r\n\t\tif (lastJsonMessage) { // если сообщение есть, то запросить новые данные о расположении шашек\r\n\t\t\tif (Number(lastJsonMessage.gameID) === Number(gameId))\r\n\t\t\t\tif (!isGameFieldLoading && !isGameDataLoading)\r\n\t\t\t\t\tdispatch(tryGetCheckersFieldAsync({gameId: gameIdParam, userId}));\r\n\t\t}\r\n\t}, [lastJsonMessage]);\r\n\r\n\tif (!Number(gameIdParam) || Number(gameIdParam) < 0) { // если не удается превратить строку в число, то значит переданный параметр (gameId) задан неправильно\r\n\t\treturn <PageNotFound title=\"Невалидный url игры\" message=\"Введите корректный url или выберите игру из списка в профиле\"/>\r\n\t}\r\n\r\n\t// если данных ещё нет, то показать загрузку (иначе проблема с чтением параметров)\r\n\tif (!gameData || isGameDataLoading) {\r\n\t\treturn <LoaderFullSpace/>\r\n\t}\r\n\r\n\t// если игра завершена, то отрендерить победную страничку\r\n\tif (gameData.status === GAME_STATUS_FINISHED || gameData.status === GAME_STATUS_OPPONENT_WIN || gameData.status === GAME_STATUS_YOU_WIN) {\r\n\t\treturn <PlayedGamePage\r\n\t\t\twinnerLogin={gameData.status === GAME_STATUS_YOU_WIN ? login + \" (Вы)\" : gameData.opponentLogin}\r\n\t\t\tloserLogin={gameData.status === GAME_STATUS_YOU_WIN ? gameData.opponentLogin : login + \" (Вы)\"}\r\n\t\t/>;\r\n\t}\r\n\r\n\t// обработчик нажатий на выбор шашки\r\n\tconst onSelectChecker = (position) => {\r\n\t\tdispatch(setSelectedCheckerPosition(position)); // добавление выбранной шашки в редакс\r\n\t\tdispatch(tryGetAvailableFieldsForCheckerAsync({gameId, position})); // добавление возможных для шашки ходов в редакс\r\n\t};\r\n\r\n\t// функция для совершения хода шашкой\r\n\tconst createCheckerStep = (position) => {\r\n\t\tdispatch(setGamesList(null)); // обнуление списка игр в профиле\r\n\t\tdispatch(tryCreateCheckerStepAsync({gameId, from: selectedCheckerPosition, to: position}));\r\n\t};\r\n\r\n\t// обработчик нажатия на кнопку \"Сдаться\"\r\n\tconst onCapitulation = () => {\r\n\t\tdispatch(setGamesList(null)); // обнуление списка игр в профиле\r\n\t\tdispatch(tryCapitulateAsync(gameId));\r\n\t};\r\n\r\n\tconst checkersFieldProps = {\r\n\t\tgameField,\r\n\t\tisGameFieldLoading,\r\n\t\tgameFieldError,\r\n\t\tplayerColor: gameData.playerColor,\r\n\t\tgameStatus: gameData.status,\r\n\t\tselectedCheckerPosition,\r\n\t\tonSelectChecker,\r\n\t\tavailableFields,\r\n\t\tcreateCheckerStep\r\n\t};\r\n\r\n\tconst gamePageProps = {\r\n\t\tlogin,\r\n\t\tgameId,\r\n\t\tgameData,\r\n\t\tisGameDataLoading,\r\n\t\tgameDataError,\r\n\t\tonCapitulation,\r\n\t\tisCapitulating\r\n\t};\r\n\r\n\treturn (\r\n\t\t<GamePage {...gamePageProps} checkersFieldProps={checkersFieldProps}/>\r\n\t);\r\n}\r\n\r\nexport default withAuthRedirect(GamePageContainer);","import React from \"react\";\r\nimport {Navigate} from \"react-router-dom\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {selectLogin, selectToken, selectUserId, setLogoutData, tryGetLoginUserDataAsync} from \"../../Redux/AuthReducer\";\r\nimport LoaderFullSpace from \"../Common/LoaderFullSpace/LoaderFullSpace\";\r\nimport {getTokenFromCookie} from \"../../Cookie/AuthWithCookie\";\r\n\r\n// пропускает на нужную страницу только если пользователь авторизован\r\n// иначе редиректит на страницу авторизации\r\nconst withAuthRedirect = (Component) => {\r\n\treturn (props) => {\r\n\t\tconst userId = useSelector(selectUserId);\r\n\t\tconst login = useSelector(selectLogin);\r\n\t\tconst token = useSelector(selectToken);\r\n\t\tconst dispatch = useDispatch();\r\n\r\n\t\t// если токен есть (получен из куки), а идентификатора пользователя нет, значит надо подгрузить информацию о пользователе\r\n\t\tReact.useEffect(() => {\r\n\t\t\tif (token && !login) {\r\n\t\t\t\tdispatch(tryGetLoginUserDataAsync(userId));\r\n\t\t\t}\r\n\t\t});\r\n\t\t// при этом отображается загрузка\r\n\t\tif (token && !login) {\r\n\t\t\treturn <LoaderFullSpace/>\r\n\t\t}\r\n\r\n\t\t// проверка, что токен не был отозван\r\n\t\tif (getTokenFromCookie() !== token) {\r\n\t\t\tdispatch(setLogoutData()); // если отозван, то на всякий случай диспатчим logout\r\n\t\t\treturn <Navigate to={\"/login\"}/> // редирект на страницу авторизации\r\n\t\t}\r\n\r\n\t\t// если авторизация пройдена, то рендерится нужный компонент, иначе редирект на страницу авторизации\r\n\t\tif (userId)\r\n\t\t\treturn <Component {...props}/>\r\n\t\treturn <Navigate to={\"/login\"}/>\r\n\t}\r\n}\r\n\r\nexport default withAuthRedirect;","// This icon file is generated automatically.\nvar FrownOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z\" } }] }, \"name\": \"frown\", \"theme\": \"outlined\" };\nexport default FrownOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport FrownOutlinedSvg from \"@ant-design/icons-svg/es/asn/FrownOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar FrownOutlined = function FrownOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: FrownOutlinedSvg\n  }));\n};\nFrownOutlined.displayName = 'FrownOutlined';\nexport default /*#__PURE__*/React.forwardRef(FrownOutlined);","import React from \"react\";\r\nimport Title from \"antd/lib/typography/Title\";\r\nimport {Button} from \"antd\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport TemplatePageWithMenu from \"../TemplatePageWithMenu/TemplatePageWithMenu\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {selectUserId} from \"../../Redux/AuthReducer\";\r\nimport {FrownOutlined} from \"@ant-design/icons\";\r\n\r\nconst PageNotFound = ({title = \"404. Такой страницы нет\", message = \"Попробуйте ввести другой адрес\"}) => {\r\n\r\n\tconst navigate = useNavigate(); // хук для перехода на другие страницы\r\n\tconst userId = useSelector(selectUserId); // получение идентификатора пользователя для проверки его авторизации\r\n\r\n\t// тело компонента\r\n\tconst body = <>\r\n\t\t<Title>\r\n\t\t\t<FrownOutlined/>&nbsp;\r\n\t\t\t{title}\r\n\t\t</Title>\r\n\t\t<p>{message}</p>\r\n\t\t<Button type={\"primary\"} onClick={() => navigate(\"/profile\")}>\r\n\t\t\t{\r\n\t\t\t\tuserId\r\n\t\t\t\t\t? <>Перейти в профиль</>\r\n\t\t\t\t\t: <>Авторизоваться</>\r\n\t\t\t}\r\n\t\t</Button>\r\n\t</>\r\n\r\n\tif (userId) // если пользователь авторизован, то отображается боковое меню\r\n\t\treturn <TemplatePageWithMenu>{body}</TemplatePageWithMenu>;\r\n\r\n\t// иначе отображается только тело компонента\r\n\treturn <div style={{margin: \"15px\"}}>\r\n\t\t{body}\r\n\t</div>;\r\n}\r\n\r\nexport default PageNotFound;","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"TemplatePageWithMenu_wrapper__ixbQB\",\"sidebar\":\"TemplatePageWithMenu_sidebar__yXlI7\",\"content\":\"TemplatePageWithMenu_content__Mc3IK\"};","import React, {useEffect} from \"react\";\r\nimport {AppstoreOutlined, ClockCircleOutlined, PlaySquareOutlined, UserOutlined} from \"@ant-design/icons\";\r\nimport {Menu} from \"antd\";\r\nimport styles from \"./TemplatePageWithMenu.module.css\"\r\nimport {useLocation, useNavigate} from \"react-router-dom\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {selectOpenedMenuBlocks, setOpenedMenuBlocks} from \"../../Redux/MenuReducer\";\r\nimport {selectGames, selectIsGamesListLoading, tryGetGamesListAsync} from \"../../Redux/ProfileReducer\";\r\nimport {reinterpretGameData} from \"../../Utils/Checkers\";\r\nimport {selectUserId} from \"../../Redux/AuthReducer\";\r\nimport {GAME_STATUS_IN_PROCESS, GAME_STATUS_OPPONENT_TURN} from \"../../Strings\";\r\n\r\nconst TemplatePageWithMenu = ({children}) => {\r\n\tconst navigate = useNavigate(); // хук для перехода на другие страницы\r\n\tconst location = useLocation().pathname; // получение url странички; pathname возвращает часть пути, используемую приложением\r\n\r\n\tconst userId = useSelector(selectUserId);\r\n\tlet games = useSelector(selectGames); // получение списка последних игр\r\n\tconst isGamesListLoading = useSelector(selectIsGamesListLoading);\r\n\tconst openedMenuBlocks = useSelector(selectOpenedMenuBlocks); // получение списка раскрытых блоков меню\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (games === null && !isGamesListLoading) {\r\n\t\t\tdispatch(tryGetGamesListAsync());\r\n\t\t}\r\n\t});\r\n\r\n\t// если есть игры в списке пользователя, то отобразить 5 последних в меню\r\n\tif (games) {\r\n\t\tlet counter = 0;\r\n\t\tgames = games.filter(game => { // оставляем только 5 активных игр\r\n\t\t\tif ((game.status === GAME_STATUS_IN_PROCESS) && (counter++ <= 5))\r\n\t\t\t\treturn game;\r\n\t\t\telse return false;\r\n\t\t});\r\n\t\tgames = games.map(game => reinterpretGameData(game, userId)); // добавляем необходимые данные\r\n\t\tgames = games.map(game => ({ // оформляем в виде массива children для меню\r\n\t\t\tlabel: game.opponentLogin,\r\n\t\t\ticon: (game.status === GAME_STATUS_OPPONENT_TURN ? <ClockCircleOutlined/> : <PlaySquareOutlined/>),\r\n\t\t\tkey: \"/game/\" + game.id\r\n\t\t}));\r\n\t}\r\n\r\n\t// элементы меню\r\n\t// в качестве key используется path для перехода\r\n\tconst menuItems = [\r\n\t\t{label: \"Профиль\", icon: <UserOutlined/>, key: \"/profile\"},\r\n\t\t{\r\n\t\t\tlabel: \"Последние игры\",\r\n\t\t\ticon: <AppstoreOutlined/>,\r\n\t\t\tkey: \"games\",\r\n\t\t\tchildren: games !== null && games.length > 0\r\n\t\t\t\t? games\r\n\t\t\t\t: [{label: \"Нет активных игр\", key: \"/noGames\", type: \"group\"}]\r\n\t\t},\r\n\t];\r\n\r\n\t// обработчик нажатий на элемент меню\r\n\tconst onMenuSelect = (props) => {\r\n\t\tnavigate(props.key); // переход на страничку\r\n\t}\r\n\r\n\t// обработчик раскрытия и закрытия элементов меню\r\n\tconst onMenuBlockClick = (props) => {\r\n\t\tdispatch(setOpenedMenuBlocks(props));\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={styles.wrapper}>\r\n\t\t\t<div className={styles.sidebar}>\r\n\t\t\t\t<Menu\r\n\t\t\t\t\tmode=\"inline\"\r\n\t\t\t\t\tdefaultSelectedKeys={[location]}\r\n\t\t\t\t\tdefaultOpenKeys={openedMenuBlocks}\r\n\t\t\t\t\titems={menuItems}\r\n\t\t\t\t\tonSelect={onMenuSelect}\r\n\t\t\t\t\tonOpenChange={onMenuBlockClick}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<section className={styles.content}>\r\n\t\t\t\t{children}\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default TemplatePageWithMenu;","export { useWebSocket as default } from './lib/use-websocket';\n\nexport { SendMessage, Options } from './lib/types';\n\nexport { useSocketIO } from './lib/use-socket-io';\n\nexport { ReadyState } from './lib/constants';\n\nexport { useEventSource } from './lib/use-event-source';\n\nexport { resetGlobalState } from './lib/util';\n","import { MutableRefObject } from 'react';\nimport { setUpSocketIOPing } from './socket-io';\nimport {\n  DEFAULT_RECONNECT_LIMIT,\n  DEFAULT_RECONNECT_INTERVAL_MS,\n  ReadyState,\n  isEventSourceSupported,\n} from './constants';\nimport { Options, SendMessage, WebSocketLike } from './types';\nimport { assertIsWebSocket } from './util';\n\nexport interface Setters {\n  setLastMessage: (message: WebSocketEventMap['message']) => void;\n  setReadyState: (readyState: ReadyState) => void;\n}\n\nconst bindMessageHandler = (\n  webSocketInstance: WebSocketLike,\n  optionsRef: MutableRefObject<Options>,\n  setLastMessage: Setters['setLastMessage'],\n) => {\n  webSocketInstance.onmessage = (message: WebSocketEventMap['message']) => {\n    optionsRef.current.onMessage && optionsRef.current.onMessage(message);\n    if (typeof optionsRef.current.filter === 'function' && optionsRef.current.filter(message) !== true) {\n      return;\n    }\n    setLastMessage(message);\n  };\n};\n\nconst bindOpenHandler = (\n  webSocketInstance: WebSocketLike,\n  optionsRef: MutableRefObject<Options>,\n  setReadyState: Setters['setReadyState'],\n  reconnectCount: MutableRefObject<number>,\n) => {\n  webSocketInstance.onopen = (event: WebSocketEventMap['open']) => {\n    optionsRef.current.onOpen && optionsRef.current.onOpen(event);\n    reconnectCount.current = 0;\n    setReadyState(ReadyState.OPEN);\n  };\n};\n\nconst bindCloseHandler = (\n  webSocketInstance: WebSocketLike,\n  optionsRef: MutableRefObject<Options>,\n  setReadyState: Setters['setReadyState'],\n  reconnect: () => void,\n  reconnectCount: MutableRefObject<number>,\n) => {\n  if (isEventSourceSupported && webSocketInstance instanceof EventSource) {\n    return () => {};\n  }\n  assertIsWebSocket(webSocketInstance, optionsRef.current.skipAssert);\n  let reconnectTimeout: number;\n\n  webSocketInstance.onclose = (event: WebSocketEventMap['close']) => {\n    optionsRef.current.onClose && optionsRef.current.onClose(event);\n    setReadyState(ReadyState.CLOSED);\n    if (optionsRef.current.shouldReconnect && optionsRef.current.shouldReconnect(event)) {\n      const reconnectAttempts = optionsRef.current.reconnectAttempts ?? DEFAULT_RECONNECT_LIMIT;\n      if (reconnectCount.current < reconnectAttempts) {\n        reconnectTimeout = window.setTimeout(() => {\n          reconnectCount.current++;\n          reconnect();\n        }, optionsRef.current.reconnectInterval ?? DEFAULT_RECONNECT_INTERVAL_MS);\n      } else {\n        optionsRef.current.onReconnectStop && optionsRef.current.onReconnectStop(reconnectAttempts);\n        console.warn(`Max reconnect attempts of ${reconnectAttempts} exceeded`);\n      }\n    }\n  };\n\n  return () => reconnectTimeout && window.clearTimeout(reconnectTimeout);\n};\n\nconst bindErrorHandler = (\n  webSocketInstance: WebSocketLike,\n  optionsRef: MutableRefObject<Options>,\n  setReadyState: Setters['setReadyState'],\n  reconnect: () => void,\n  reconnectCount: MutableRefObject<number>,\n) => {\n  let reconnectTimeout: number;\n\n  webSocketInstance.onerror = (error: WebSocketEventMap['error']) => {\n    optionsRef.current.onError && optionsRef.current.onError(error);\n    if (isEventSourceSupported && webSocketInstance instanceof EventSource) {\n      optionsRef.current.onClose && optionsRef.current.onClose({\n        ...error,\n        code: 1006,\n        reason: `An error occurred with the EventSource: ${error}`,\n        wasClean: false,\n      });\n\n      setReadyState(ReadyState.CLOSED);\n      webSocketInstance.close();\n    }\n    \n    if (optionsRef.current.retryOnError) {\n      if (reconnectCount.current < (optionsRef.current.reconnectAttempts ?? DEFAULT_RECONNECT_LIMIT)) {\n        reconnectTimeout = window.setTimeout(() => {\n          reconnectCount.current++;\n          reconnect();\n        }, optionsRef.current.reconnectInterval ?? DEFAULT_RECONNECT_INTERVAL_MS);\n      } else {\n        optionsRef.current.onReconnectStop && optionsRef.current.onReconnectStop(optionsRef.current.reconnectAttempts as number);\n        console.warn(`Max reconnect attempts of ${optionsRef.current.reconnectAttempts} exceeded`);\n      }\n    }\n  };\n\n  return () => reconnectTimeout && window.clearTimeout(reconnectTimeout);\n};\n\nexport const attachListeners = (\n    webSocketInstance: WebSocketLike,\n    setters: Setters,\n    optionsRef: MutableRefObject<Options>,\n    reconnect: () => void,\n    reconnectCount: MutableRefObject<number>,\n    sendMessage: SendMessage,\n  ): (() => void) => {\n  const { setLastMessage, setReadyState } = setters;\n\n  let interval: number;\n  let cancelReconnectOnClose: () => void;\n  let cancelReconnectOnError: () => void;\n\n  if (optionsRef.current.fromSocketIO) {\n    interval = setUpSocketIOPing(sendMessage);\n  }\n\n  bindMessageHandler(\n    webSocketInstance,\n    optionsRef,\n    setLastMessage,\n  );\n\n  bindOpenHandler(\n    webSocketInstance,\n    optionsRef,\n    setReadyState,\n    reconnectCount,\n  );\n\n  cancelReconnectOnClose = bindCloseHandler(\n    webSocketInstance,\n    optionsRef,\n    setReadyState,\n    reconnect,\n    reconnectCount,\n  );\n\n  cancelReconnectOnError = bindErrorHandler(\n    webSocketInstance,\n    optionsRef,\n    setReadyState,\n    reconnect,\n    reconnectCount,\n  );\n\n  return () => {\n    setReadyState(ReadyState.CLOSING);\n    cancelReconnectOnClose();\n    cancelReconnectOnError();\n    webSocketInstance.close();\n    if (interval) clearInterval(interval);\n  };\n};\n","import { sharedWebSockets } from './globals';\nimport { DEFAULT_RECONNECT_LIMIT, DEFAULT_RECONNECT_INTERVAL_MS, ReadyState, isEventSourceSupported } from './constants';\nimport { getSubscribers } from './manage-subscribers';\nimport { MutableRefObject } from 'react';\nimport { Options, SendMessage, WebSocketLike } from './types';\nimport { setUpSocketIOPing } from './socket-io';\n\nconst bindMessageHandler = (\n  webSocketInstance: WebSocketLike,\n  url: string,\n) => {\n  webSocketInstance.onmessage = (message: WebSocketEventMap['message']) => {\n    getSubscribers(url).forEach(subscriber => {\n      if (subscriber.optionsRef.current.onMessage) {\n        subscriber.optionsRef.current.onMessage(message);\n      }\n\n      if (\n        typeof subscriber.optionsRef.current.filter === 'function' &&\n        subscriber.optionsRef.current.filter(message) !== true\n      ) {\n        return;\n      }\n\n      subscriber.setLastMessage(message);\n    });\n  };\n};\n\nconst bindOpenHandler = (\n  webSocketInstance: WebSocketLike,\n  url: string,\n) => {\n  webSocketInstance.onopen = (event: WebSocketEventMap['open']) => {\n    getSubscribers(url).forEach(subscriber => {\n      subscriber.reconnectCount.current = 0;\n      if (subscriber.optionsRef.current.onOpen) {\n        subscriber.optionsRef.current.onOpen(event);\n      }\n\n      subscriber.setReadyState(ReadyState.OPEN);\n    });\n  };\n};\n\nconst bindCloseHandler = (\n  webSocketInstance: WebSocketLike,\n  url: string,\n) => {\n  if (webSocketInstance instanceof WebSocket) {\n    webSocketInstance.onclose = (event: WebSocketEventMap['close']) => {\n      getSubscribers(url).forEach(subscriber => {\n        if (subscriber.optionsRef.current.onClose) {\n          subscriber.optionsRef.current.onClose(event);\n        }\n  \n        subscriber.setReadyState(ReadyState.CLOSED);\n      });\n      \n      delete sharedWebSockets[url];\n  \n      getSubscribers(url).forEach(subscriber => {\n        if (\n          subscriber.optionsRef.current.shouldReconnect &&\n          subscriber.optionsRef.current.shouldReconnect(event)\n        ) {\n          const reconnectAttempts = subscriber.optionsRef.current.reconnectAttempts ?? DEFAULT_RECONNECT_LIMIT;\n          if (subscriber.reconnectCount.current < reconnectAttempts) {\n            setTimeout(() => {\n              subscriber.reconnectCount.current++;\n              subscriber.reconnect.current();\n            }, subscriber.optionsRef.current.reconnectInterval ?? DEFAULT_RECONNECT_INTERVAL_MS);\n          } else {\n            subscriber.optionsRef.current.onReconnectStop && subscriber.optionsRef.current.onReconnectStop(subscriber.optionsRef.current.reconnectAttempts as number);\n            console.warn(`Max reconnect attempts of ${reconnectAttempts} exceeded`);\n          }\n        }\n      });\n    };\n  }\n};\n\nconst bindErrorHandler = (\n  webSocketInstance: WebSocketLike,\n  url: string,\n) => {\n  webSocketInstance.onerror = (error: WebSocketEventMap['error']) => {\n    getSubscribers(url).forEach(subscriber => {\n      if (subscriber.optionsRef.current.onError) {\n        subscriber.optionsRef.current.onError(error);\n      }\n      if (isEventSourceSupported && webSocketInstance instanceof EventSource) {\n        subscriber.optionsRef.current.onClose && subscriber.optionsRef.current.onClose({\n          ...error,\n          code: 1006,\n          reason: `An error occurred with the EventSource: ${error}`,\n          wasClean: false,\n        });\n  \n        subscriber.setReadyState(ReadyState.CLOSED);\n      }\n    });\n    if (isEventSourceSupported && webSocketInstance instanceof EventSource) {\n      webSocketInstance.close();\n    }\n  };\n};\n\nexport const attachSharedListeners = (\n  webSocketInstance: WebSocketLike,\n  url: string,\n  optionsRef: MutableRefObject<Options>,\n  sendMessage: SendMessage,\n) => {\n  let interval: number;\n\n  if (optionsRef.current.fromSocketIO) {\n    interval = setUpSocketIOPing(sendMessage);\n  }\n\n  bindMessageHandler(webSocketInstance, url);\n  bindCloseHandler(webSocketInstance, url);\n  bindOpenHandler(webSocketInstance, url);\n  bindErrorHandler(webSocketInstance, url);\n\n  return () => {\n    if (interval) clearInterval(interval);\n  };\n};\n","import { EventSourceEventHandlers, EventSourceOptions } from \"./types\";\n\nconst MILLISECONDS = 1;\nconst SECONDS = 1000 * MILLISECONDS;\n\nexport const DEFAULT_OPTIONS = {};\nexport const EMPTY_EVENT_HANDLERS: EventSourceEventHandlers = {};\nexport const DEFAULT_EVENT_SOURCE_OPTIONS: EventSourceOptions = {\n  withCredentials: false,\n  events: EMPTY_EVENT_HANDLERS,\n};\nexport const SOCKET_IO_PING_INTERVAL = 25 * SECONDS;\nexport const SOCKET_IO_PATH = '/socket.io/?EIO=3&transport=websocket';\nexport const SOCKET_IO_PING_CODE = '2';\nexport const DEFAULT_RECONNECT_LIMIT = 20;\nexport const DEFAULT_RECONNECT_INTERVAL_MS = 5000;\nexport const UNPARSABLE_JSON_OBJECT = {};\n\nexport enum ReadyState {\n  UNINSTANTIATED = -1,\n  CONNECTING = 0,\n  OPEN = 1,\n  CLOSING = 2,\n  CLOSED = 3,\n}\n\nconst eventSourceSupported = () => {\n  try {\n    return 'EventSource' in globalThis;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport const isReactNative = typeof navigator !== 'undefined' && navigator.product === 'ReactNative';\nexport const isEventSourceSupported = !isReactNative && eventSourceSupported();\n","import { MutableRefObject } from 'react';\nimport { sharedWebSockets } from './globals';\nimport { Options, SendMessage, Subscriber, WebSocketLike } from './types';\nimport { isEventSourceSupported, ReadyState, isReactNative } from './constants';\nimport { attachListeners } from './attach-listener';\nimport { attachSharedListeners } from './attach-shared-listeners';\nimport { addSubscriber, removeSubscriber, hasSubscribers } from './manage-subscribers';\n\n//TODO ensure that all onClose callbacks are called\n\nconst cleanSubscribers = (\n  url: string,\n  subscriber: Subscriber,\n  optionsRef: MutableRefObject<Options>,\n  setReadyState: (readyState: ReadyState) => void,\n  clearSocketIoPingInterval: (() => void) | null,\n) => {\n  return () => {\n    removeSubscriber(url, subscriber);\n    if (!hasSubscribers(url)) {\n      try {\n        const socketLike = sharedWebSockets[url];\n        if (socketLike instanceof WebSocket) {\n          socketLike.onclose = (event: WebSocketEventMap['close']) => {\n            if (optionsRef.current.onClose) {\n              optionsRef.current.onClose(event);\n            }\n            setReadyState(ReadyState.CLOSED);\n          };\n        }\n        socketLike.close();\n      } catch (e) {\n\n      }\n      if (clearSocketIoPingInterval) clearSocketIoPingInterval();\n\n      delete sharedWebSockets[url];\n    }\n  }\n};\n\nexport const createOrJoinSocket = (\n  webSocketRef: MutableRefObject<WebSocketLike | null>,\n  url: string,\n  setReadyState: (readyState: ReadyState) => void,\n  optionsRef: MutableRefObject<Options>,\n  setLastMessage: (message: WebSocketEventMap['message']) => void,\n  startRef: MutableRefObject<() => void>,\n  reconnectCount: MutableRefObject<number>,\n  sendMessage: SendMessage,\n): (() => void) => {\n  if (!isEventSourceSupported && optionsRef.current.eventSourceOptions) {\n    if (isReactNative) {\n      throw new Error('EventSource is not supported in ReactNative');\n    } else {\n      throw new Error('EventSource is not supported');\n    }\n  }\n\n  if (optionsRef.current.share) {\n    let clearSocketIoPingInterval: ((() => void) | null) = null;\n    if (sharedWebSockets[url] === undefined) {\n      sharedWebSockets[url] = optionsRef.current.eventSourceOptions ?\n        new EventSource(url, optionsRef.current.eventSourceOptions) :\n        new WebSocket(url, optionsRef.current.protocols);\n      webSocketRef.current = sharedWebSockets[url];\n      setReadyState(ReadyState.CONNECTING);\n      clearSocketIoPingInterval = attachSharedListeners(\n        sharedWebSockets[url],\n        url,\n        optionsRef,\n        sendMessage,\n      );\n    } else {\n      webSocketRef.current = sharedWebSockets[url];\n      setReadyState(sharedWebSockets[url].readyState);\n    }\n\n    const subscriber: Subscriber = {\n      setLastMessage,\n      setReadyState,\n      optionsRef,\n      reconnectCount,\n      reconnect: startRef,\n    };\n  \n    addSubscriber(url, subscriber);\n\n    return cleanSubscribers(\n      url,\n      subscriber,\n      optionsRef,\n      setReadyState,\n      clearSocketIoPingInterval,\n    );\n  } else {\n    webSocketRef.current = optionsRef.current.eventSourceOptions ?\n      new EventSource(url, optionsRef.current.eventSourceOptions) :\n      new WebSocket(url, optionsRef.current.protocols);\n    setReadyState(ReadyState.CONNECTING);\n    if (!webSocketRef.current) {\n      throw new Error('WebSocket failed to be created');\n    }\n\n    return attachListeners(\n      webSocketRef.current,\n      {\n        setLastMessage,\n        setReadyState\n      },\n      optionsRef,\n      startRef.current,\n      reconnectCount,\n      sendMessage,\n    );\n  }\n};\n","import { MutableRefObject } from 'react';\nimport { parseSocketIOUrl, appendQueryParams } from './socket-io';\nimport { Options } from './types';\n\nexport const getUrl = async (\n  url: string | (() => string | Promise<string>),\n  optionsRef: MutableRefObject<Options>,\n) => {\n  let convertedUrl: string;\n\n  if (typeof url === 'function') {\n    convertedUrl = await url();\n  } else {\n    convertedUrl = url;\n  }\n\n  const parsedUrl = optionsRef.current.fromSocketIO ?\n    parseSocketIOUrl(convertedUrl) :\n    convertedUrl;\n\n  const parsedWithQueryParams = optionsRef.current.queryParams ?\n    appendQueryParams(\n      parsedUrl,\n      optionsRef.current.queryParams\n    ) :\n    parsedUrl;\n\n  return parsedWithQueryParams;\n};\n","import { WebSocketLike } from \"./types\";\n\nexport interface SharedWebSockets {\n  [url: string]: WebSocketLike;\n}\n\nexport const sharedWebSockets: SharedWebSockets = {};\n\nexport const resetWebSockets = (url?: string): void => {\n  if (url && sharedWebSockets.hasOwnProperty(url)) {\n    delete sharedWebSockets[url];\n  } else {\n    for (let url in sharedWebSockets){\n      if (sharedWebSockets.hasOwnProperty(url)){\n        delete sharedWebSockets[url];\n      }\n    }\n  }\n}\n","import { Subscriber } from './types';\n\nexport type Subscribers = {\n    [url: string]: Set<Subscriber>,\n}\n  \nconst subscribers: Subscribers = {};\nconst EMPTY_LIST: Subscriber[] = [];\n\nexport const getSubscribers = (url: string): Subscriber[] => {\n    if (hasSubscribers(url)) {\n        return Array.from(subscribers[url]);\n    }\n    return EMPTY_LIST;\n};\n\nexport const hasSubscribers = (url: string): boolean => {\n    return subscribers[url]?.size > 0;\n};\n\nexport const addSubscriber = (url: string, subscriber: Subscriber): void => {\n    subscribers[url] = subscribers[url] || new Set<Subscriber>();\n    subscribers[url].add(subscriber);\n};\n\nexport const removeSubscriber = (url: string, subscriber: Subscriber): void => {\n    subscribers[url].delete(subscriber);\n};\n\nexport const resetSubscribers = (url?: string): void => {\n    if (url && subscribers.hasOwnProperty(url)) {\n        delete subscribers[url];\n    } else {\n        for (let url in subscribers){\n            if (subscribers.hasOwnProperty(url)){\n                delete subscribers[url];\n            }\n        }\n    }\n}\n","import { MutableRefObject } from 'react';\n\ntype IfEquals<X, Y, A=X, B=never> =\n  (<T>() => T extends X ? 1 : 2) extends\n  (<T>() => T extends Y ? 1 : 2) ? A : B;\n\ntype WritableKeys<T> = {\n  [P in keyof T]-?: IfEquals<{ [Q in P]: T[P] }, { -readonly [Q in P]: T[P] }, P>\n}[keyof T];\n\nexport const websocketWrapper = (\n  webSocket: WebSocket,\n  start: MutableRefObject<() => void>,\n): WebSocket => {\n\n  return new Proxy<WebSocket>(webSocket, {\n    get: (obj, key: keyof WebSocket) => {\n      const val = obj[key];\n      if ((key as any) === 'reconnect') return start;\n      if (typeof val === 'function') {\n        console.error('Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket.');\n        \n        //Prevent error thrown by invoking a non-function\n        return () => {};\n      } else {\n        return val;\n      }\n    },\n    set: <T extends WritableKeys<WebSocket>>(obj: WebSocket, key: T, val: WebSocket[T]) => {\n      if (/^on/.test(key)) {\n        console.warn('The websocket\\'s event handlers should be defined through the options object passed into useWebSocket.')\n        return false;\n      } else {\n        obj[key] = val;\n        return true;\n      }\n    },\n  });\n};\n\nexport default websocketWrapper;\n","import { SOCKET_IO_PING_INTERVAL, SOCKET_IO_PATH, SOCKET_IO_PING_CODE } from './constants';\nimport { QueryParams, SendMessage } from './types';\n\nexport const parseSocketIOUrl = (url: string) => {\n  if (url) {\n    const isSecure = /^https|wss/.test(url);\n    const strippedProtocol = url.replace(/^(https?|wss?)(:\\/\\/)?/, '');\n    const removedFinalBackSlack = strippedProtocol.replace(/\\/$/, '');\n    const protocol = isSecure ? 'wss' : 'ws';\n\n    return `${protocol}://${removedFinalBackSlack}${SOCKET_IO_PATH}`;\n  } else if (url === '') {\n    const isSecure = /^https/.test(window.location.protocol);\n    const protocol = isSecure ? 'wss' : 'ws';\n    const port = window.location.port ? `:${window.location.port}` : '';\n\n    return `${protocol}://${window.location.hostname}${port}${SOCKET_IO_PATH}`;\n  }\n\n  return url;\n};\n\nexport const appendQueryParams = (url: string, params: QueryParams = {}): string => {\n  const hasParamsRegex = /\\?([\\w]+=[\\w]+)/;\n  const alreadyHasParams = hasParamsRegex.test(url);\n\n  const stringified = `${Object.entries(params).reduce((next, [key, value]) => {\n    return next + `${key}=${value}&`;\n  }, '').slice(0, -1)}`;\n\n  return `${url}${alreadyHasParams ? '&' : '?'}${stringified}`;\n};\n\nexport const setUpSocketIOPing = (sendMessage: SendMessage, interval = SOCKET_IO_PING_INTERVAL) => {\n  const ping = () => sendMessage(SOCKET_IO_PING_CODE);\n\n  return window.setInterval(ping, interval);\n};\n","import { useEffect, useRef } from 'react'\nimport { useWebSocket } from './use-websocket'\nimport { DEFAULT_EVENT_SOURCE_OPTIONS, EMPTY_EVENT_HANDLERS } from './constants'\nimport { EventSourceOptions, Options, EventSourceHook, EventSourceEventHandlers } from './types';\n\nexport const useEventSource = (\n  url: string | (() => string | Promise<string>) | null,\n  { withCredentials, events, ...options }: EventSourceOptions = DEFAULT_EVENT_SOURCE_OPTIONS,\n  connect: boolean = true,\n): EventSourceHook => {\n  const optionsWithEventSource: Options = {\n      ...options,\n      eventSourceOptions: {\n        withCredentials,\n      }\n  };\n  const eventsRef = useRef<EventSourceEventHandlers>(EMPTY_EVENT_HANDLERS);\n  if (events) {\n    eventsRef.current = events\n  }\n\n  const {\n    lastMessage,\n    readyState,\n    getWebSocket,\n  } = useWebSocket(\n    url,\n    optionsWithEventSource,\n    connect,\n  );\n\n  useEffect(() => {\n    if (lastMessage?.type) {\n        Object.entries(eventsRef.current).forEach(([type, handler]) => {\n            if (type === lastMessage.type) {\n                handler(lastMessage);\n            }\n        });\n    }\n  }, [lastMessage]);\n\n  return {\n    lastEvent: lastMessage,\n    readyState,\n    getEventSource: getWebSocket,\n  };\n}\n","import { useMemo } from 'react'\nimport { useWebSocket } from './use-websocket'\nimport { DEFAULT_OPTIONS } from './constants'\nimport { JsonValue, Options, WebSocketHook } from './types';\n\nexport interface SocketIOMessageData {\n  type: string,\n  payload: JsonValue | null,\n}\n\nconst emptyEvent: SocketIOMessageData = {\n  type: 'empty',\n  payload: null,\n}\n\nconst getSocketData = (event: WebSocketEventMap['message'] | null): SocketIOMessageData => {\n  if (!event || !event.data) {\n    return emptyEvent\n  }\n\n  const match = event.data.match(/\\[.*]/)\n\n  if (!match) {\n    return emptyEvent\n  }\n\n  const data = JSON.parse(match)\n\n  if (!Array.isArray(data) || !data[1]) {\n    return emptyEvent\n  }\n\n  return {\n    type: data[0],\n    payload: data[1],\n  }\n}\n\nexport const useSocketIO = (\n  url: string | (() => string | Promise<string>) | null,\n  options: Options = DEFAULT_OPTIONS,\n  connect: boolean = true,\n): WebSocketHook<SocketIOMessageData, SocketIOMessageData> => {\n  const optionsWithSocketIO = useMemo(() => ({\n    ...options,\n    fromSocketIO: true,\n  }), [])\n\n  const {\n    sendMessage,\n    sendJsonMessage,\n    lastMessage,\n    readyState,\n    getWebSocket,\n  } = useWebSocket(\n\n    url,\n    optionsWithSocketIO,\n    connect,\n  );\n\n  const socketIOLastMessage = useMemo(() =>\n    getSocketData(lastMessage), [lastMessage]);\n\n  return {\n    sendMessage,\n    sendJsonMessage,\n    lastMessage: socketIOLastMessage,\n    lastJsonMessage: socketIOLastMessage,\n    readyState,\n    getWebSocket,\n  };\n}\n","import { useEffect, useRef, useState, useCallback, useMemo } from 'react';\nimport { flushSync } from 'react-dom';\nimport { DEFAULT_OPTIONS, isEventSourceSupported, ReadyState, UNPARSABLE_JSON_OBJECT } from './constants';\nimport { createOrJoinSocket } from './create-or-join';\nimport { getUrl } from './get-url';\nimport websocketWrapper from './proxy';\nimport {\n  Options,\n  ReadyStateState,\n  SendMessage,\n  SendJsonMessage,\n  WebSocketMessage,\n  WebSocketHook,\n  WebSocketLike,\n  JsonValue,\n} from './types';\nimport { assertIsWebSocket } from './util';\n\nexport const useWebSocket = <T extends JsonValue | null = JsonValue | null>(\n  url: string | (() => string | Promise<string>) | null,\n  options: Options = DEFAULT_OPTIONS,\n  connect: boolean = true,\n): WebSocketHook<T> => {\n  const [lastMessage, setLastMessage] = useState<WebSocketEventMap['message'] | null>(null);\n  const [readyState, setReadyState] = useState<ReadyStateState>({});\n  const lastJsonMessage: T = useMemo(() => {\n    if (lastMessage) {\n      try {\n        return JSON.parse(lastMessage.data);\n      } catch (e) {\n        return UNPARSABLE_JSON_OBJECT;\n      }\n    }\n    return null; \n  },[lastMessage]);\n  const convertedUrl = useRef<string | null>(null);\n  const webSocketRef = useRef<WebSocketLike | null>(null);\n  const startRef = useRef<() => void>(() => void 0);\n  const reconnectCount = useRef<number>(0);\n  const messageQueue = useRef<WebSocketMessage[]>([]);\n  const webSocketProxy = useRef<WebSocketLike | null>(null);\n  const optionsCache = useRef<Options>(options);\n  optionsCache.current = options;\n\n  const readyStateFromUrl: ReadyState =\n    convertedUrl.current && readyState[convertedUrl.current] !== undefined ?\n      readyState[convertedUrl.current] :\n      url !== null && connect === true ?\n        ReadyState.CONNECTING :\n        ReadyState.UNINSTANTIATED;\n\n  const stringifiedQueryParams = options.queryParams ? JSON.stringify(options.queryParams) : null;\n\n  const sendMessage: SendMessage = useCallback((message, keep = true) => {\n    if (isEventSourceSupported && webSocketRef.current instanceof EventSource) {\n      console.warn('Unable to send a message from an eventSource');\n      return;\n    }\n  \n    if (webSocketRef.current?.readyState === ReadyState.OPEN) {\n      assertIsWebSocket(webSocketRef.current, optionsCache.current.skipAssert);\n      webSocketRef.current.send(message);\n    } else if (keep) {\n      messageQueue.current.push(message);\n    }\n  }, []);\n\n  const sendJsonMessage: SendJsonMessage = useCallback((message, keep = true) => {\n    sendMessage(JSON.stringify(message), keep);\n  }, [sendMessage]);\n  \n  const getWebSocket = useCallback(() => {\n    if (optionsCache.current.share !== true || (isEventSourceSupported && webSocketRef.current instanceof EventSource)) {\n      return webSocketRef.current;\n    }\n\n    if (webSocketProxy.current === null && webSocketRef.current) {\n      assertIsWebSocket(webSocketRef.current, optionsCache.current.skipAssert);\n      webSocketProxy.current = websocketWrapper(webSocketRef.current, startRef);\n    }\n\n    return webSocketProxy.current;\n  }, []);\n\n  useEffect(() => {\n    if (url !== null && connect === true) {\n      let removeListeners: () => void;\n      let expectClose = false;\n      let createOrJoin = true;\n\n      const start = async () => {\n        convertedUrl.current = await getUrl(url, optionsCache);\n\n        const protectedSetLastMessage = (message: WebSocketEventMap['message']) => {\n          if (!expectClose) {\n            flushSync(() => setLastMessage(message));\n          }\n        };\n  \n        const protectedSetReadyState = (state: ReadyState) => {\n          if (!expectClose) {\n            flushSync(() => setReadyState(prev => ({\n              ...prev,\n              ...(convertedUrl.current && {[convertedUrl.current]: state}),\n            })));\n          }\n        };\n\n        if(createOrJoin) {\n          removeListeners = createOrJoinSocket(\n            webSocketRef,\n            convertedUrl.current,\n            protectedSetReadyState,\n            optionsCache,\n            protectedSetLastMessage,\n            startRef,\n            reconnectCount,\n            sendMessage,\n          );\n        }\n      };\n\n      startRef.current = () => {\n        if (!expectClose) {\n          if (webSocketProxy.current) webSocketProxy.current = null;\n          removeListeners?.();\n          start();\n        }\n      };\n    \n      start();\n      return () => {\n        expectClose = true;\n        createOrJoin = false;\n        if (webSocketProxy.current) webSocketProxy.current = null;\n        removeListeners?.();\n        setLastMessage(null);\n      };\n    } else if (url === null || connect === false) {\n      reconnectCount.current = 0; // reset reconnection attempts\n      setReadyState(prev => ({\n        ...prev,\n        ...(convertedUrl.current && {[convertedUrl.current]: ReadyState.CLOSED}),\n      }));\n    }\n  }, [url, connect, stringifiedQueryParams, sendMessage]);\n\n  useEffect(() => {\n    if (readyStateFromUrl === ReadyState.OPEN) {\n      messageQueue.current.splice(0).forEach(message => {\n        sendMessage(message);\n      });\n    }\n  }, [readyStateFromUrl]);\n\n  return {\n    sendMessage,\n    sendJsonMessage,\n    lastMessage,\n    lastJsonMessage,\n    readyState: readyStateFromUrl,\n    getWebSocket,\n  };\n};\n","import { WebSocketLike } from './types';\nimport { resetWebSockets } from './globals';\nimport { resetSubscribers } from './manage-subscribers';\n\nexport function assertIsWebSocket (\n    webSocketInstance: WebSocketLike,\n    skip?: boolean,\n): asserts webSocketInstance is WebSocket {\n    if (!skip && webSocketInstance instanceof WebSocket === false) throw new Error('');\n};\n\n\nexport function resetGlobalState (url?: string): void {\n    resetSubscribers(url);\n    resetWebSockets(url);\n};\n"],"names":["Checker","type","color","selected","onSelectChecker","position","playerColor","gameStatus","className","styles","convertFullParamsToShortly","src","CHECKER_COLOR_SHORTLY_BLACK","CHECKER_TYPE_SHORTLY_CHECKER","blackChecker","blackQueen","whiteChecker","whiteQueen","alt","onClick","GAME_STATUS_YOUR_TURN","undefined","Cell","isBlack","checker","isAvailable","createCheckerStep","Row","rowNumber","gameField","selectedCheckerPosition","availableFields","cells","letters","map","letter","find","elem","isGameFieldLoading","gameFieldError","LoaderFullSpace","message","Title","numbers","CHECKER_COLOR_BLACK","reverse","rows","Array","isArray","number","numbersSide","lettersSide","gameId","login","gameData","isGameDataLoading","gameDataError","onCapitulation","isCapitulating","checkersFieldProps","body","level","opponentLogin","CHECKER_COLOR_WHITE","status","GAME_STATUS_OPPONENT_TURN","danger","loading","errorMsg","TemplatePageWithMenu","primaryColor","secondaryColor","TrophyTwoTone","props","ref","React","AntdIcon","_objectSpread","icon","TrophyTwoToneSvg","displayName","winnerLogin","loserLogin","twoToneColor","withAuthRedirect","gameIdParam","useParams","useSelector","selectLogin","userId","selectUserId","selectGameId","selectGameData","selectIsGameDataLoading","selectGameDataError","selectGameField","selectIsGameFieldLoading","selectGameFieldError","selectSelectedCheckerPosition","selectAvailableFields","selectIsCapitulating","dispatch","useDispatch","useEffect","setGameId","tryGetGameDataAsync","tryGetCheckersFieldAsync","WS_PATH","SERVER_WEB_SOCKET_BASE_URL","lastJsonMessage","useWebSocket","Number","gameID","PageNotFound","title","GAME_STATUS_FINISHED","GAME_STATUS_OPPONENT_WIN","GAME_STATUS_YOU_WIN","setSelectedCheckerPosition","tryGetAvailableFieldsForCheckerAsync","setGamesList","tryCreateCheckerStepAsync","from","to","gamePageProps","tryCapitulateAsync","Component","token","selectToken","tryGetLoginUserDataAsync","getTokenFromCookie","setLogoutData","FrownOutlined","FrownOutlinedSvg","navigate","useNavigate","style","margin","children","location","useLocation","pathname","games","selectGames","isGamesListLoading","selectIsGamesListLoading","openedMenuBlocks","selectOpenedMenuBlocks","tryGetGamesListAsync","counter","filter","game","GAME_STATUS_IN_PROCESS","reinterpretGameData","label","ClockCircleOutlined","PlaySquareOutlined","key","id","menuItems","UserOutlined","AppstoreOutlined","length","mode","defaultSelectedKeys","defaultOpenKeys","items","onSelect","onOpenChange","setOpenedMenuBlocks","Object","enumerable","get","exports","webSocketInstance","setters","optionsRef","reconnect","reconnectCount","sendMessage","interval","cancelReconnectOnClose","cancelReconnectOnError","setLastMessage","setReadyState","current","fromSocketIO","setUpSocketIOPing","onmessage","onMessage","bindMessageHandler","onopen","event","onOpen","constants_1","OPEN","bindOpenHandler","EventSource","assertIsWebSocket","skipAssert","onclose","onClose","CLOSED","shouldReconnect","reconnectAttempts","reconnectTimeout","window","setTimeout","reconnectInterval","onReconnectStop","console","warn","clearTimeout","bindCloseHandler","onerror","error","onError","code","reason","wasClean","close","retryOnError","bindErrorHandler","CLOSING","clearInterval","url","getSubscribers","forEach","subscriber","WebSocket","globals_1","withCredentials","events","ReadyState","navigator","product","globalThis","e","eventSourceSupported","webSocketRef","startRef","eventSourceOptions","Error","share","clearSocketIoPingInterval","protocols","CONNECTING","attachSharedListeners","readyState","addSubscriber","removeSubscriber","hasSubscribers","socketLike","cleanSubscribers","attachListeners","convertedUrl","_a","parsedUrl","parseSocketIOUrl","queryParams","appendQueryParams","hasOwnProperty","url_1","subscribers","EMPTY_LIST","size","Set","add","delete","webSocket","start","Proxy","obj","val","set","test","isSecure","removedFinalBackSlack","replace","protocol","port","hostname","params","alreadyHasParams","stringified","entries","reduce","next","value","slice","setInterval","connect","options","optionsWithEventSource","eventsRef","useRef","lastMessage","getWebSocket","handler","lastEvent","getEventSource","emptyEvent","payload","optionsWithSocketIO","useMemo","sendJsonMessage","socketIOLastMessage","data","match","JSON","parse","getSocketData","useState","messageQueue","webSocketProxy","optionsCache","readyStateFromUrl","UNINSTANTIATED","stringifiedQueryParams","stringify","useCallback","keep","send","push","removeListeners_1","expectClose_1","createOrJoin_1","start_1","getUrl","_b","protectedSetLastMessage","flushSync","protectedSetReadyState","state","prev","createOrJoinSocket","splice","skip","resetSubscribers","resetWebSockets"],"sourceRoot":""}