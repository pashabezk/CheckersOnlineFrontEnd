"use strict";(self.webpackChunkcheckers_online_frontend=self.webpackChunkcheckers_online_frontend||[]).push([[376,651],{7376:function(e,t,r){r.r(t),r.d(t,{default:function(){return re},letters:function(){return te}});var n=r(1413),o=r(2791),c=r(9434),s=r(6202),a=r(7689),i=r(6651),u=r(2940),l="CheckersField_checkersField__5I996",d="CheckersField_letters__hW59M",f="CheckersField_lettersTop__22LOg",p="CheckersField_lettersBottom__van6G",v="CheckersField_numbers__ZoKYg",h="CheckersField_numbersLeft__hW187",S="CheckersField_numbersRight__5RHpU",_="CheckersField_cellsField__t6if+",b="CheckersField_checkersFieldRow__a97xq",g="CheckersField_blackCell__YDxPZ",m="CheckersField_whiteCell__jRUyy",E="CheckersField_availableCell__wIu4D",y="CheckersField_checker__0jVkb",O="CheckersField_checkerPlayer__kZHN6",C="CheckersField_checkerSelected__+6GkT";var k=r.p+"static/media/BlackQueen.04b418a082c57e040b7f1b2928e42c8e.svg";var N=r.p+"static/media/WhiteQueen.1a036d2a0d3d912d39226611496470dc.svg";var w=r.p+"static/media/Black.89cd2513aff4bafc1851b83f8b43dc26.svg",T=r(6009),j=r(8263),I=r(7633),x=r(5507),R=r(184),P=function(e){var t=e.type,r=e.color,n=e.selected,o=e.onSelectChecker,c=e.position,s=e.playerColor,a=e.gameStatus;return(0,R.jsx)("img",{className:y+(n?" "+C:(0,j.WI)(s)===r?" "+O:""),src:r===j.mi?t===j.D6?w:k:t===j.D6?T.Z:N,alt:"checker",onClick:(0,j.WI)(s)===r&&a===j.TU?function(){o(c)}:void 0})},L=function(e){var t=e.isBlack,r=e.checker,n=e.selected,o=e.onSelectChecker,c=e.position,s=e.playerColor,a=e.isAvailable,i=e.gameStatus,u=e.createCheckerStep;return(0,R.jsx)("div",{className:(t?g:m)+(a?" "+E:""),onClick:a?function(){u(c)}:void 0,children:r?(0,R.jsx)(P,{type:r.type,color:r.color,selected:n,onSelectChecker:o,position:c,playerColor:s,gameStatus:i}):(0,R.jsx)("div",{})})},M=function(e){var t=e.rowNumber,r=e.gameField,n=e.selectedCheckerPosition,o=e.onSelectChecker,c=e.playerColor,s=e.availableFields,a=e.gameStatus,i=e.createCheckerStep,u=t%2!==1,l=te.map((function(e){u=!u;var l=e+t,d=!1,f=r.find((function(e){return e.position===l&&(l===n&&(d=!0),e)})),p=s.find((function(e){return e===l}));return(0,R.jsx)(L,{isBlack:u,checker:f,selected:d,onSelectChecker:o,position:l,playerColor:c,isAvailable:p,gameStatus:a,createCheckerStep:i},l)}));return(0,R.jsx)("div",{className:b,children:l})},A=function(e){var t=e.gameStatus,r=e.gameField,n=e.isGameFieldLoading,o=e.gameFieldError,c=e.playerColor,s=e.selectedCheckerPosition,a=e.onSelectChecker,i=e.availableFields,u=e.createCheckerStep;if(n)return(0,R.jsx)(I.Z,{message:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0448\u0430\u0448\u0435\u043a"});if(o)return(0,R.jsxs)("div",{children:[(0,R.jsx)(x.Z,{children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),(0,R.jsx)("p",{children:o})]});var b=[8,7,6,5,4,3,2,1];c===j.tD&&(b=b.reverse());var g=[];Array.isArray(r)&&(g=b.map((function(e){return(0,R.jsx)(M,{rowNumber:e,gameField:r,selectedCheckerPosition:s,onSelectChecker:a,playerColor:c,availableFields:i,gameStatus:t,createCheckerStep:u},e)})));var m=b.map((function(e){return(0,R.jsx)("div",{children:e},e+" "+e)})),E=te.map((function(e){return(0,R.jsx)("div",{children:e},e+e)}));return(0,R.jsxs)("div",{className:l,children:[(0,R.jsx)("div",{className:f+" "+d,children:E}),(0,R.jsx)("div",{className:h+" "+v,children:m}),(0,R.jsx)("div",{className:_,children:g}),(0,R.jsx)("div",{className:S+" "+v,children:m}),(0,R.jsx)("div",{className:p+" "+d,children:E})]})},F=r(2777),W=r(7309),D="GamePage_user__C4Fzx",Z="GamePage_checkerImg__h5uZj",U="GamePage_gameBlock__FJkLb",G="GamePage_checkersField__StnyP",V="GamePage_gameBlockFooterWrapper__fgZte",B="GamePage_gameBlockFooter__0-Trc",J=function(e){var t=e.gameId,r=e.login,o=e.gameData,c=e.isGameDataLoading,s=e.gameDataError,a=e.onCapitulation,i=e.isCapitulating,u=e.checkersFieldProps,l=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(x.Z,{level:2,children:(0,R.jsxs)("span",{children:["\u041f\u0430\u0440\u0442\u0438\u044f \u0441 ",o.opponentLogin]})}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("p",{className:D,children:[(0,R.jsx)("img",{src:o.playerColor===j.Rq?T.Z:w,alt:"checker",className:Z}),(0,R.jsx)("span",{children:r}),o.status===j.TU&&(0,R.jsx)("span",{children:" (\u0412\u0430\u0448 \u0445\u043e\u0434)"})]}),(0,R.jsxs)("p",{className:D,children:[(0,R.jsx)("img",{src:o.playerColor===j.Rq?w:T.Z,alt:"checker",className:Z}),(0,R.jsx)("span",{children:o.opponentLogin}),o.status===j.e0&&(0,R.jsx)("span",{children:" (\u0435\u0433\u043e \u0445\u043e\u0434)"})]})]}),(0,R.jsxs)("div",{className:U,children:[(0,R.jsx)("div",{className:G,children:(0,R.jsx)(A,(0,n.Z)({},u))}),(0,R.jsx)("div",{className:V,children:(0,R.jsxs)("div",{className:B,children:[(0,R.jsxs)("p",{children:["gameId: ",t]}),(0,R.jsx)(W.Z,{danger:!0,loading:i,onClick:function(){return a()},children:"\u0421\u0434\u0430\u0442\u044c\u0441\u044f"})]})})]})]}),d=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(x.Z,{children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),(0,R.jsx)("p",{children:s})]});return(0,R.jsx)(F.Z,{children:c?(0,R.jsx)(I.Z,{}):s?d:l})},K={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M320 480c0 49.1 19.1 95.3 53.9 130.1 34.7 34.8 81 53.9 130.1 53.9h16c49.1 0 95.3-19.1 130.1-53.9 34.8-34.7 53.9-81 53.9-130.1V184H320v296zM184 352c0 41 26.9 75.8 64 87.6-37.1-11.9-64-46.7-64-87.6zm364 382.5C665 721.8 758.4 630.2 773.8 514 758.3 630.2 665 721.7 548 734.5zM250.2 514C265.6 630.2 359 721.8 476 734.5 359 721.7 265.7 630.2 250.2 514z",fill:t}},{tag:"path",attrs:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM248 439.6a91.99 91.99 0 01-64-87.6V232h64v207.6zM704 480c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z",fill:e}}]}},name:"trophy",theme:"twotone"},H=r(4291),z=function(e,t){return o.createElement(H.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:K}))};z.displayName="TrophyTwoTone";var q=o.forwardRef(z),Y=function(e){var t=e.winnerLogin,r=e.loserLogin;return(0,R.jsxs)(F.Z,{children:[(0,R.jsx)(x.Z,{children:"\u0418\u0433\u0440\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),(0,R.jsxs)(x.Z,{level:2,children:["\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c: ",t," ",(0,R.jsx)(q,{twoToneColor:"#e09a00"})]}),(0,R.jsxs)(x.Z,{level:3,children:["\u0421\u043e\u043f\u0435\u0440\u043d\u0438\u043a: ",r]})]})},Q=r(408),X=r(3708),$=r(9829),ee=r(6092),te=["a","b","c","d","e","f","g","h"],re=(0,u.Z)((function(){var e=(0,a.UO)().gameId,t=(0,c.v9)(Q.KN),r=(0,c.v9)(Q.c7),u=(0,c.v9)(s.t4),l=(0,c.v9)(s.gg),d=(0,c.v9)(s.kK),f=(0,c.v9)(s.He),p=(0,c.v9)(s.NA),v=(0,c.v9)(s.Us),h=(0,c.v9)(s.YZ),S=(0,c.v9)(s.ux),_=(0,c.v9)(s.kq),b=(0,c.v9)(s.Wh),g=(0,c.I0)();(0,o.useEffect)((function(){e!==u&&(g((0,s.ax)(e)),g((0,s.Ou)({gameId:e,userId:r}))),l||d||g((0,s.Ou)({gameId:e,userId:r})),p||v||d||g((0,s.jb)({gameId:e,userId:r}))})),(0,o.useEffect)((function(){return function(){g((0,s.ax)(null))}}),[]);var m=ee.XO+"".concat(r),E=(0,$.ZP)(m,{}).lastJsonMessage;if((0,o.useEffect)((function(){E&&Number(E.gameID)===Number(u)&&(v||d||g((0,s.jb)({gameId:e,userId:r})))}),[E]),!Number(e)||Number(e)<0)return(0,R.jsx)(i.default,{title:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 url \u0438\u0433\u0440\u044b",message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 url \u0438\u043b\u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0433\u0440\u0443 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435"});if(!l||d)return(0,R.jsx)(I.Z,{});if(l.status===j.V9||l.status===j.lr||l.status===j.B4)return(0,R.jsx)(Y,{winnerLogin:l.status===j.B4?t+" (\u0412\u044b)":l.opponentLogin,loserLogin:l.status===j.B4?l.opponentLogin:t+" (\u0412\u044b)"});var y={gameField:p,isGameFieldLoading:v,gameFieldError:h,playerColor:l.playerColor,gameStatus:l.status,selectedCheckerPosition:S,onSelectChecker:function(e){g((0,s.Zs)(e)),g((0,s.BP)({gameId:u,position:e}))},availableFields:_,createCheckerStep:function(e){g((0,X.xr)(null)),g((0,s.vG)({gameId:u,from:S,to:e}))}},O={login:t,gameId:u,gameData:l,isGameDataLoading:d,gameDataError:f,onCapitulation:function(){g((0,X.xr)(null)),g((0,s.eM)(u))},isCapitulating:b};return(0,R.jsx)(J,(0,n.Z)((0,n.Z)({},O),{},{checkersFieldProps:y}))}))},2940:function(e,t,r){var n=r(1413),o=r(2791),c=r(7689),s=r(9434),a=r(408),i=r(7633),u=r(5171),l=r(184);t.Z=function(e){return function(t){var r=(0,s.v9)(a.c7),d=(0,s.v9)(a.KN),f=(0,s.v9)(a.rK),p=(0,s.I0)();return o.useEffect((function(){f&&!d&&p((0,a.$b)(r))})),f&&!d?(0,l.jsx)(i.Z,{}):(0,u.GL)()!==f?(p((0,a.GT)()),(0,l.jsx)(c.Fg,{to:"/login"})):r?(0,l.jsx)(e,(0,n.Z)({},t)):(0,l.jsx)(c.Fg,{to:"/login"})}}},6651:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var n=r(2791),o=r(5507),c=r(7309),s=r(7689),a=r(2777),i=r(9434),u=r(408),l=r(1413),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z"}}]},name:"frown",theme:"outlined"},f=r(4291),p=function(e,t){return n.createElement(f.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t,icon:d}))};p.displayName="FrownOutlined";var v=n.forwardRef(p),h=r(184),S=function(e){var t=e.title,r=void 0===t?"404. \u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435\u0442":t,n=e.message,l=void 0===n?"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u0430\u0434\u0440\u0435\u0441":n,d=(0,s.s0)(),f=(0,i.v9)(u.c7),p=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(o.Z,{children:[(0,h.jsx)(v,{}),"\xa0",r]}),(0,h.jsx)("p",{children:l}),(0,h.jsx)(c.Z,{type:"primary",onClick:function(){return d("/profile")},children:f?(0,h.jsx)(h.Fragment,{children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}):(0,h.jsx)(h.Fragment,{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]});return f?(0,h.jsx)(a.Z,{children:p}):(0,h.jsx)("div",{style:{margin:"15px"},children:p})}},2777:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(2791),o=r(50),c=r(8586),s=r(9529),a=r(8961),i=r(9356),u="TemplatePageWithMenu_wrapper__ixbQB",l="TemplatePageWithMenu_sidebar__yXlI7",d="TemplatePageWithMenu_content__Mc3IK",f=r(7689),p=r(9434),v=r(1347),h=r(3708),S=r(4862),_=r(408),b=r(8263),g=r(184),m=function(e){var t=e.children,r=(0,f.s0)(),m=(0,f.TH)().pathname,E=(0,p.v9)(_.c7),y=(0,p.v9)(h.NN),O=(0,p.v9)(h.cE),C=(0,p.v9)(v.Ew),k=(0,p.I0)();if((0,n.useEffect)((function(){null!==y||O||k((0,h.ns)())})),y){var N=0;y=(y=(y=y.filter((function(e){return e.status===b.wY&&N++<=5&&e}))).map((function(e){return(0,S.q)(e,E)}))).map((function(e){return{label:e.opponentLogin,icon:e.status===b.e0?(0,g.jsx)(o.Z,{}):(0,g.jsx)(c.Z,{}),key:"/game/"+e.id}}))}var w=[{label:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",icon:(0,g.jsx)(s.Z,{}),key:"/profile"},{label:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0438\u0433\u0440\u044b",icon:(0,g.jsx)(a.Z,{}),key:"games",children:null!==y&&y.length>0?y:[{label:"\u041d\u0435\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0438\u0433\u0440",key:"/noGames",type:"group"}]}];return(0,g.jsxs)("div",{className:u,children:[(0,g.jsx)("div",{className:l,children:(0,g.jsx)(i.Z,{mode:"inline",defaultSelectedKeys:[m],defaultOpenKeys:C,items:w,onSelect:function(e){r(e.key)},onOpenChange:function(e){k((0,v.xz)(e))}})}),(0,g.jsx)("section",{className:d,children:t})]})}},9829:function(e,t,r){t.ZP=void 0;var n=r(6632);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return n.useWebSocket}});var o=r(2570);var c=r(3879);var s=r(3536);var a=r(5141)},5624:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachListeners=void 0;var o=r(2820),c=r(3879),s=r(5141);t.attachListeners=function(e,t,r,a,i,u){var l,d,f,p=t.setLastMessage,v=t.setReadyState;return r.current.fromSocketIO&&(l=(0,o.setUpSocketIOPing)(u)),function(e,t,r){e.onmessage=function(e){t.current.onMessage&&t.current.onMessage(e),"function"===typeof t.current.filter&&!0!==t.current.filter(e)||r(e)}}(e,r,p),function(e,t,r,n){e.onopen=function(e){t.current.onOpen&&t.current.onOpen(e),n.current=0,r(c.ReadyState.OPEN)}}(e,r,v,i),d=function(e,t,r,n,o){return c.isEventSourceSupported&&e instanceof EventSource?function(){}:((0,s.assertIsWebSocket)(e,t.current.skipAssert),e.onclose=function(e){var s,i;if(t.current.onClose&&t.current.onClose(e),r(c.ReadyState.CLOSED),t.current.shouldReconnect&&t.current.shouldReconnect(e)){var u=null!==(s=t.current.reconnectAttempts)&&void 0!==s?s:c.DEFAULT_RECONNECT_LIMIT;o.current<u?a=window.setTimeout((function(){o.current++,n()}),null!==(i=t.current.reconnectInterval)&&void 0!==i?i:c.DEFAULT_RECONNECT_INTERVAL_MS):(t.current.onReconnectStop&&t.current.onReconnectStop(u),console.warn("Max reconnect attempts of ".concat(u," exceeded")))}},function(){return a&&window.clearTimeout(a)});var a}(e,r,v,a,i),f=function(e,t,r,o,s){var a;return e.onerror=function(i){var u,l;t.current.onError&&t.current.onError(i),c.isEventSourceSupported&&e instanceof EventSource&&(t.current.onClose&&t.current.onClose(n(n({},i),{code:1006,reason:"An error occurred with the EventSource: ".concat(i),wasClean:!1})),r(c.ReadyState.CLOSED),e.close()),t.current.retryOnError&&(s.current<(null!==(u=t.current.reconnectAttempts)&&void 0!==u?u:c.DEFAULT_RECONNECT_LIMIT)?a=window.setTimeout((function(){s.current++,o()}),null!==(l=t.current.reconnectInterval)&&void 0!==l?l:c.DEFAULT_RECONNECT_INTERVAL_MS):(t.current.onReconnectStop&&t.current.onReconnectStop(t.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(t.current.reconnectAttempts," exceeded"))))},function(){return a&&window.clearTimeout(a)}}(e,r,v,a,i),function(){v(c.ReadyState.CLOSING),d(),f(),e.close(),l&&clearInterval(l)}}},9221:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachSharedListeners=void 0;var o=r(5650),c=r(3879),s=r(777),a=r(2820);t.attachSharedListeners=function(e,t,r,i){var u;return r.current.fromSocketIO&&(u=(0,a.setUpSocketIOPing)(i)),function(e,t){e.onmessage=function(e){(0,s.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onMessage&&t.optionsRef.current.onMessage(e),"function"===typeof t.optionsRef.current.filter&&!0!==t.optionsRef.current.filter(e)||t.setLastMessage(e)}))}}(e,t),function(e,t){e instanceof WebSocket&&(e.onclose=function(e){(0,s.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onClose&&t.optionsRef.current.onClose(e),t.setReadyState(c.ReadyState.CLOSED)})),delete o.sharedWebSockets[t],(0,s.getSubscribers)(t).forEach((function(t){var r,n;if(t.optionsRef.current.shouldReconnect&&t.optionsRef.current.shouldReconnect(e)){var o=null!==(r=t.optionsRef.current.reconnectAttempts)&&void 0!==r?r:c.DEFAULT_RECONNECT_LIMIT;t.reconnectCount.current<o?setTimeout((function(){t.reconnectCount.current++,t.reconnect.current()}),null!==(n=t.optionsRef.current.reconnectInterval)&&void 0!==n?n:c.DEFAULT_RECONNECT_INTERVAL_MS):(t.optionsRef.current.onReconnectStop&&t.optionsRef.current.onReconnectStop(t.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(o," exceeded")))}}))})}(e,t),function(e,t){e.onopen=function(e){(0,s.getSubscribers)(t).forEach((function(t){t.reconnectCount.current=0,t.optionsRef.current.onOpen&&t.optionsRef.current.onOpen(e),t.setReadyState(c.ReadyState.OPEN)}))}}(e,t),function(e,t){e.onerror=function(r){(0,s.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onError&&t.optionsRef.current.onError(r),c.isEventSourceSupported&&e instanceof EventSource&&(t.optionsRef.current.onClose&&t.optionsRef.current.onClose(n(n({},r),{code:1006,reason:"An error occurred with the EventSource: ".concat(r),wasClean:!1})),t.setReadyState(c.ReadyState.CLOSED))})),c.isEventSourceSupported&&e instanceof EventSource&&e.close()}}(e,t),function(){u&&clearInterval(u)}}},3879:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEventSourceSupported=t.isReactNative=t.ReadyState=t.UNPARSABLE_JSON_OBJECT=t.DEFAULT_RECONNECT_INTERVAL_MS=t.DEFAULT_RECONNECT_LIMIT=t.SOCKET_IO_PING_CODE=t.SOCKET_IO_PATH=t.SOCKET_IO_PING_INTERVAL=t.DEFAULT_EVENT_SOURCE_OPTIONS=t.EMPTY_EVENT_HANDLERS=t.DEFAULT_OPTIONS=void 0;t.DEFAULT_OPTIONS={},t.EMPTY_EVENT_HANDLERS={},t.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:t.EMPTY_EVENT_HANDLERS},t.SOCKET_IO_PING_INTERVAL=25e3,t.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",t.SOCKET_IO_PING_CODE="2",t.DEFAULT_RECONNECT_LIMIT=20,t.DEFAULT_RECONNECT_INTERVAL_MS=5e3,t.UNPARSABLE_JSON_OBJECT={},function(e){e[e.UNINSTANTIATED=-1]="UNINSTANTIATED",e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t.ReadyState||(t.ReadyState={}));t.isReactNative="undefined"!==typeof navigator&&"ReactNative"===navigator.product,t.isEventSourceSupported=!t.isReactNative&&function(){try{return"EventSource"in globalThis}catch(e){return!1}}()},721:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.createOrJoinSocket=void 0;var n=r(5650),o=r(3879),c=r(5624),s=r(9221),a=r(777);t.createOrJoinSocket=function(e,t,r,i,u,l,d,f){if(!o.isEventSourceSupported&&i.current.eventSourceOptions)throw o.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(i.current.share){var p=null;void 0===n.sharedWebSockets[t]?(n.sharedWebSockets[t]=i.current.eventSourceOptions?new EventSource(t,i.current.eventSourceOptions):new WebSocket(t,i.current.protocols),e.current=n.sharedWebSockets[t],r(o.ReadyState.CONNECTING),p=(0,s.attachSharedListeners)(n.sharedWebSockets[t],t,i,f)):(e.current=n.sharedWebSockets[t],r(n.sharedWebSockets[t].readyState));var v={setLastMessage:u,setReadyState:r,optionsRef:i,reconnectCount:d,reconnect:l};return(0,a.addSubscriber)(t,v),function(e,t,r,c,s){return function(){if((0,a.removeSubscriber)(e,t),!(0,a.hasSubscribers)(e)){try{var i=n.sharedWebSockets[e];i instanceof WebSocket&&(i.onclose=function(e){r.current.onClose&&r.current.onClose(e),c(o.ReadyState.CLOSED)}),i.close()}catch(u){}s&&s(),delete n.sharedWebSockets[e]}}}(t,v,i,r,p)}if(e.current=i.current.eventSourceOptions?new EventSource(t,i.current.eventSourceOptions):new WebSocket(t,i.current.protocols),r(o.ReadyState.CONNECTING),!e.current)throw new Error("WebSocket failed to be created");return(0,c.attachListeners)(e.current,{setLastMessage:u,setReadyState:r},i,l.current,d,f)}},5890:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,c){function s(e){try{i(n.next(e))}catch(t){c(t)}}function a(e){try{i(n.throw(e))}catch(t){c(t)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}i((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,c,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(a){c=[6,a],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=void 0;var c=r(2820);t.getUrl=function(e,t){return n(void 0,void 0,void 0,(function(){var r,n;return o(this,(function(o){switch(o.label){case 0:return"function"!==typeof e?[3,2]:[4,e()];case 1:return r=o.sent(),[3,3];case 2:r=e,o.label=3;case 3:return n=t.current.fromSocketIO?(0,c.parseSocketIOUrl)(r):r,[2,t.current.queryParams?(0,c.appendQueryParams)(n,t.current.queryParams):n]}}))}))}},5650:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetWebSockets=t.sharedWebSockets=void 0,t.sharedWebSockets={};t.resetWebSockets=function(e){if(e&&t.sharedWebSockets.hasOwnProperty(e))delete t.sharedWebSockets[e];else for(var r in t.sharedWebSockets)t.sharedWebSockets.hasOwnProperty(r)&&delete t.sharedWebSockets[r]}},777:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetSubscribers=t.removeSubscriber=t.addSubscriber=t.hasSubscribers=t.getSubscribers=void 0;var r={},n=[];t.getSubscribers=function(e){return(0,t.hasSubscribers)(e)?Array.from(r[e]):n};t.hasSubscribers=function(e){var t;return(null===(t=r[e])||void 0===t?void 0:t.size)>0};t.addSubscriber=function(e,t){r[e]=r[e]||new Set,r[e].add(t)};t.removeSubscriber=function(e,t){r[e].delete(t)};t.resetSubscribers=function(e){if(e&&r.hasOwnProperty(e))delete r[e];else for(var t in r)r.hasOwnProperty(t)&&delete r[t]}},1625:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.websocketWrapper=void 0;t.websocketWrapper=function(e,t){return new Proxy(e,{get:function(e,r){var n=e[r];return"reconnect"===r?t:"function"===typeof n?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):n},set:function(e,t,r){return/^on/.test(t)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(e[t]=r,!0)}})},t.default=t.websocketWrapper},2820:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.setUpSocketIOPing=t.appendQueryParams=t.parseSocketIOUrl=void 0;var n=r(3879);t.parseSocketIOUrl=function(e){if(e){var t=/^https|wss/.test(e),r=e.replace(/^(https?|wss?)(:\/\/)?/,"").replace(/\/$/,"");return"".concat(o=t?"wss":"ws","://").concat(r).concat(n.SOCKET_IO_PATH)}if(""===e){var o=(t=/^https/.test(window.location.protocol))?"wss":"ws",c=window.location.port?":".concat(window.location.port):"";return"".concat(o,"://").concat(window.location.hostname).concat(c).concat(n.SOCKET_IO_PATH)}return e};t.appendQueryParams=function(e,t){void 0===t&&(t={});var r=/\?([\w]+=[\w]+)/.test(e),n="".concat(Object.entries(t).reduce((function(e,t){var r=t[0],n=t[1];return e+"".concat(r,"=").concat(n,"&")}),"").slice(0,-1));return"".concat(e).concat(r?"&":"?").concat(n)};t.setUpSocketIOPing=function(e,t){void 0===t&&(t=n.SOCKET_IO_PING_INTERVAL);return window.setInterval((function(){return e(n.SOCKET_IO_PING_CODE)}),t)}},3536:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.useEventSource=void 0;var c=r(2791),s=r(6632),a=r(3879);t.useEventSource=function(e,t,r){void 0===t&&(t=a.DEFAULT_EVENT_SOURCE_OPTIONS);var i=t.withCredentials,u=t.events,l=o(t,["withCredentials","events"]);void 0===r&&(r=!0);var d=n(n({},l),{eventSourceOptions:{withCredentials:i}}),f=(0,c.useRef)(a.EMPTY_EVENT_HANDLERS);u&&(f.current=u);var p=(0,s.useWebSocket)(e,d,r),v=p.lastMessage,h=p.readyState,S=p.getWebSocket;return(0,c.useEffect)((function(){(null===v||void 0===v?void 0:v.type)&&Object.entries(f.current).forEach((function(e){var t=e[0],r=e[1];t===v.type&&r(v)}))}),[v]),{lastEvent:v,readyState:h,getEventSource:S}}},2570:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useSocketIO=void 0;var o=r(2791),c=r(6632),s=r(3879),a={type:"empty",payload:null};t.useSocketIO=function(e,t,r){void 0===t&&(t=s.DEFAULT_OPTIONS),void 0===r&&(r=!0);var i=(0,o.useMemo)((function(){return n(n({},t),{fromSocketIO:!0})}),[]),u=(0,c.useWebSocket)(e,i,r),l=u.sendMessage,d=u.sendJsonMessage,f=u.lastMessage,p=u.readyState,v=u.getWebSocket,h=(0,o.useMemo)((function(){return function(e){if(!e||!e.data)return a;var t=e.data.match(/\[.*]/);if(!t)return a;var r=JSON.parse(t);return Array.isArray(r)&&r[1]?{type:r[0],payload:r[1]}:a}(f)}),[f]);return{sendMessage:l,sendJsonMessage:d,lastMessage:h,lastJsonMessage:h,readyState:p,getWebSocket:v}}},6632:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,c){function s(e){try{i(n.next(e))}catch(t){c(t)}}function a(e){try{i(n.throw(e))}catch(t){c(t)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}i((n=n.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,n,o,c,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(a){c=[6,a],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useWebSocket=void 0;var a=r(2791),i=r(4164),u=r(3879),l=r(721),d=r(5890),f=s(r(1625)),p=r(5141);t.useWebSocket=function(e,t,r){void 0===t&&(t=u.DEFAULT_OPTIONS),void 0===r&&(r=!0);var s=(0,a.useState)(null),v=s[0],h=s[1],S=(0,a.useState)({}),_=S[0],b=S[1],g=(0,a.useMemo)((function(){if(v)try{return JSON.parse(v.data)}catch(e){return u.UNPARSABLE_JSON_OBJECT}return null}),[v]),m=(0,a.useRef)(null),E=(0,a.useRef)(null),y=(0,a.useRef)((function(){})),O=(0,a.useRef)(0),C=(0,a.useRef)([]),k=(0,a.useRef)(null),N=(0,a.useRef)(t);N.current=t;var w=m.current&&void 0!==_[m.current]?_[m.current]:null!==e&&!0===r?u.ReadyState.CONNECTING:u.ReadyState.UNINSTANTIATED,T=t.queryParams?JSON.stringify(t.queryParams):null,j=(0,a.useCallback)((function(e,t){var r;void 0===t&&(t=!0),u.isEventSourceSupported&&E.current instanceof EventSource?console.warn("Unable to send a message from an eventSource"):(null===(r=E.current)||void 0===r?void 0:r.readyState)===u.ReadyState.OPEN?((0,p.assertIsWebSocket)(E.current,N.current.skipAssert),E.current.send(e)):t&&C.current.push(e)}),[]),I=(0,a.useCallback)((function(e,t){void 0===t&&(t=!0),j(JSON.stringify(e),t)}),[j]),x=(0,a.useCallback)((function(){return!0!==N.current.share||u.isEventSourceSupported&&E.current instanceof EventSource?E.current:(null===k.current&&E.current&&((0,p.assertIsWebSocket)(E.current,N.current.skipAssert),k.current=(0,f.default)(E.current,y)),k.current)}),[]);return(0,a.useEffect)((function(){if(null!==e&&!0===r){var t,s=!1,a=!0,f=function(){return o(void 0,void 0,void 0,(function(){var r,o,u;return c(this,(function(c){switch(c.label){case 0:return r=m,[4,(0,d.getUrl)(e,N)];case 1:return r.current=c.sent(),o=function(e){s||(0,i.flushSync)((function(){return h(e)}))},u=function(e){s||(0,i.flushSync)((function(){return b((function(t){var r;return n(n({},t),m.current&&((r={})[m.current]=e,r))}))}))},a&&(t=(0,l.createOrJoinSocket)(E,m.current,u,N,o,y,O,j)),[2]}}))}))};return y.current=function(){s||(k.current&&(k.current=null),null===t||void 0===t||t(),f())},f(),function(){s=!0,a=!1,k.current&&(k.current=null),null===t||void 0===t||t(),h(null)}}null!==e&&!1!==r||(O.current=0,b((function(e){var t;return n(n({},e),m.current&&((t={})[m.current]=u.ReadyState.CLOSED,t))})))}),[e,r,T,j]),(0,a.useEffect)((function(){w===u.ReadyState.OPEN&&C.current.splice(0).forEach((function(e){j(e)}))}),[w]),{sendMessage:j,sendJsonMessage:I,lastMessage:v,lastJsonMessage:g,readyState:w,getWebSocket:x}}},5141:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.resetGlobalState=t.assertIsWebSocket=void 0;var n=r(5650),o=r(777);t.assertIsWebSocket=function(e,t){if(!t&&e instanceof WebSocket===!1)throw new Error("")},t.resetGlobalState=function(e){(0,o.resetSubscribers)(e),(0,n.resetWebSockets)(e)}}}]);
//# sourceMappingURL=376.7a9ae7a1.chunk.js.map